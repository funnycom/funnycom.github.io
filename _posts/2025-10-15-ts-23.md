---
title: "[Projects] Todo 앱 만들기 with API - 2"
date: 2025-10-15 14:00:00 +0900
categories: [웹 개발, 타입스크립트]
tags: [웹개발, 타입스크립트, TS, todo, api]
pin: true
math: true
mermaid: true
---

> **프로젝트 목표**
> - TypeScript의 기본 문법을 실전에 적용한다
> - 클래스와 인터페이스를 활용하여 애플리케이션을 설계한다
> - REST API를 연동하여 데이터를 주고받는다
> - AI와 협업하여 프로젝트를 완성한다

---

## Part 2: AI와 함께 구현하기 (2-3시간)

이제 AI의 도움을 받아 실제로 코드를 작성해봅시다. 하지만 **단순히 코드를 복사하지 마세요**. AI가 생성한 코드를 이해하고, 분석하고, 개선하는 것이 중요합니다.

### 🤖 AI 협업 준비

#### 좋은 프롬프트 작성 원칙

```
✅ 좋은 프롬프트:
- 구체적이고 명확함
- 사용할 기술 스택 명시
- 요구사항을 상세히 설명
- 예상 입출력 예시 제공
- 제약사항 명시

❌ 나쁜 프롬프트:
- 막연함 ("Todo 앱 만들어줘")
- 기술 스택 불명확
- 요구사항 불명확
- 예시 없음
```

#### 프롬프트 템플릿

```
[사용할 AI에게 요청할 때 이 템플릿 사용]

"TypeScript로 [만들고 싶은 것]을(를) 구현해줘.

요구사항:
1. [요구사항 1]
2. [요구사항 2]
3. [요구사항 3]

조건:
- [제약사항 1]
- [제약사항 2]

예시:
[입력] → [출력]

주석과 타입을 명확히 작성해줘."
```

---

### 🚀 단계별 구현 가이드

## 📝 Step 1: 기본 타입 정의하기

### 당신의 설계 다시 보기

Part 1에서 설계한 내용을 확인하세요:
- Todo 인터페이스에 어떤 속성이 필요했나요?
- 어떤 추가 타입이 필요했나요?

### AI에게 요청하기

**프롬프트 예시 1: Todo 인터페이스**

```
"TypeScript로 Todo 인터페이스를 만들어줘.

요구사항:
1. id: 숫자 타입의 고유 식별자
2. title: 문자열 타입의 할 일 제목
3. completed: 불린 타입의 완료 여부
4. userId: 숫자 타입의 사용자 ID

조건:
- 모든 속성은 필수
- 각 속성에 JSDoc 주석 추가
- readonly는 사용하지 않음

예시:
const todo: Todo = {
  id: 1,
  title: "TypeScript 공부",
  completed: false,
  userId: 1
}
"
```

**프롬프트 예시 2: 필터 타입**

```
"TypeScript로 FilterType을 정의해줘.

요구사항:
1. "all", "completed", "active" 중 하나의 값만 가능
2. 유니온 타입 사용
3. JSDoc 주석으로 각 값의 의미 설명

예시:
let filter: FilterType = "all";
filter = "completed"; // OK
filter = "invalid";   // 에러
"
```

### 받은 코드 분석하기

AI가 코드를 생성하면, 다음을 확인하세요:

**[ ] 코드 이해 체크리스트**

```
□ 모든 속성이 내 설계대로 포함되었나?
□ 타입이 올바르게 지정되었나?
□ 주석이 명확한가?
□ 예시처럼 사용할 수 있나?
□ 내가 이해하지 못하는 부분은 없나?
```

### AI에게 추가 질문하기

이해가 안 되는 부분이 있다면 바로 질문하세요!

**질문 예시:**

```
"왜 interface 대신 type을 사용할 수도 있어?"
"readonly를 붙이면 어떤 장점이 있어?"
"userId는 선택적 속성으로 만들 수 있어?"
"이 인터페이스를 확장하려면 어떻게 해?"
```

### 코드 테스트하기

받은 코드를 직접 사용해보세요:

```typescript
// 테스트 코드 작성
const testTodo: Todo = {
  id: 1,
  title: "테스트",
  completed: false,
  userId: 1
};

console.log(testTodo);

// 다양한 경우 시도
// testTodo.id = "문자열"; // 에러가 나야 정상
// testTodo.invalid = true; // 에러가 나야 정상
```

---

## 📝 Step 2: TodoManager 기본 기능 구현

### 당신의 설계 다시 보기

- TodoManager에 어떤 메서드가 필요했나요?
- 어떤 속성을 private으로 만들기로 했나요?

### AI에게 요청하기

**프롬프트 예시 1: 클래스 기본 구조**

```
"TypeScript로 TodoManager 클래스를 만들어줘.

요구사항:
1. private todos: Todo[] - 할 일 목록 저장
2. private nextId: number - 다음 ID 관리 (1부터 시작)
3. constructor() - 빈 배열로 초기화

조건:
- 아직 메서드는 구현하지 말고 구조만
- 주석으로 각 속성 설명
- 타입을 명확히 지정

예시:
const manager = new TodoManager();
console.log(manager); // TodoManager { todos: [], nextId: 1 }
"
```

**프롬프트 예시 2: addTodo 메서드**

```
"TodoManager 클래스에 addTodo 메서드를 추가해줘.

요구사항:
1. 매개변수: title (문자열), userId (숫자, 기본값 1)
2. 새 Todo 객체 생성 (id는 nextId 사용)
3. todos 배열에 추가
4. nextId 증가
5. 생성된 Todo 반환

조건:
- title이 빈 문자열이면 에러 발생
- completed는 false로 초기화
- JSDoc 주석 추가

예시:
const todo = manager.addTodo("TypeScript 공부");
// { id: 1, title: "TypeScript 공부", completed: false, userId: 1 }
"
```

**프롬프트 예시 3: 나머지 메서드들**

```
"TodoManager 클래스에 다음 메서드들을 추가해줘:

1. deleteTodo(id: number): boolean
   - id로 할 일 찾아서 삭제
   - 성공하면 true, 실패하면 false 반환
   
2. toggleTodo(id: number): boolean
   - id로 할 일 찾아서 completed 반전
   - 성공하면 true, 실패하면 false 반환
   
3. getTodo(id: number): Todo | undefined
   - id로 할 일 찾아서 반환
   - 없으면 undefined
   
4. getAllTodos(): Todo[]
   - 모든 할 일 반환 (배열 복사본)
   
5. getFilteredTodos(filter: FilterType): Todo[]
   - "all": 전체
   - "completed": 완료된 것만
   - "active": 미완료된 것만

조건:
- 각 메서드에 JSDoc 주석
- 에러 케이스 처리
- 원본 배열 수정 방지 (방어적 복사)
"
```

### 받은 코드 분석 & 학습

**[ ] 코드 리뷰 체크리스트**

```
□ 모든 메서드가 내 설계대로 동작하나?
□ 에러 처리가 적절한가?
□ private/public이 올바르게 사용되었나?
□ 타입이 안전한가?
□ 주석이 명확한가?
```

**[ ] 코드 이해하기**

받은 코드를 보면서 스스로 질문해보세요:

```
1. todos.find()는 어떻게 동작하나?
   → AI에게: "find 메서드 설명해줘"

2. [...this.todos]는 왜 필요한가?
   → AI에게: "스프레드 연산자로 배열 복사하는 이유는?"

3. filter 메서드는 어떻게 동작하나?
   → AI에게: "filter 메서드 예시 더 보여줘"

4. 더 좋은 방법은 없을까?
   → AI에게: "이 코드를 개선할 방법은?"
```

### 코드 테스트하기

**프롬프트: 테스트 코드 요청**

```
"TodoManager를 테스트하는 코드를 작성해줘.

시나리오:
1. 할 일 3개 추가 ("공부", "운동", "독서")
2. 2번 할 일 완료 처리
3. 1번 할 일 삭제
4. 전체 목록 출력
5. 완료된 것만 출력
6. 미완료된 것만 출력

각 단계마다 console.log로 상태 출력해줘."
```

받은 테스트 코드를 실행하고 결과를 확인하세요!

---

## 📝 Step 3: ApiService 클래스 구현

### API 이해하기

먼저 JSONPlaceholder API를 이해해봅시다.

**[ ] API 탐색하기**

브라우저에서 직접 접속해보세요:

```
1. https://jsonplaceholder.typicode.com/todos
   → 어떤 데이터가 반환되나요?
   
2. https://jsonplaceholder.typicode.com/todos/1
   → 단일 Todo는 어떤 구조인가요?
   
3. 개발자 도구 (F12) → Network 탭
   → HTTP 요청/응답 확인
```

### AI에게 요청하기

**프롬프트 예시 1: ApiService 기본 구조**

```
"TypeScript로 ApiService 클래스를 만들어줘.

요구사항:
1. private baseUrl: string
   → "https://jsonplaceholder.typicode.com" 저장
   
2. constructor()
   → baseUrl 초기화
   
3. private async request<T>(
     endpoint: string, 
     options?: RequestInit
   ): Promise<T>
   → fetch를 래핑하는 기본 메서드
   → HTTP 에러 처리
   → JSON 파싱
   → 타입 안전성

조건:
- 제네릭 사용
- try-catch로 에러 처리
- response.ok 체크
- JSDoc 주석

예시:
const api = new ApiService();
const data = await api.request<Todo>("/todos/1");
"
```

**프롬프트 예시 2: HTTP 메서드들**

```
"ApiService에 다음 메서드들을 추가해줘:

1. async get<T>(endpoint: string): Promise<T>
   → GET 요청
   
2. async post<T>(endpoint: string, data: any): Promise<T>
   → POST 요청
   → Content-Type: application/json
   → body를 JSON.stringify
   
3. async put<T>(endpoint: string, data: any): Promise<T>
   → PUT 요청
   
4. async delete(endpoint: string): Promise<void>
   → DELETE 요청

조건:
- 모두 request 메서드 사용
- 에러 처리 포함
- 타입 안전성
- JSDoc 주석

예시:
const todos = await api.get<Todo[]>("/todos");
const newTodo = await api.post<Todo>("/todos", {
  title: "새 할 일",
  completed: false,
  userId: 1
});
"
```

### 받은 코드 분석

**[ ] 코드 이해하기**

```
□ 제네릭 <T>는 왜 사용하나?
□ async/await는 어떻게 동작하나?
□ try-catch는 왜 필요한가?
□ RequestInit는 무엇인가?
□ response.ok는 무엇을 확인하나?
```

**질문 예시:**

```
"제네릭을 사용하는 이유를 예시로 설명해줘"
"RequestInit 타입에는 어떤 속성들이 있어?"
"fetch의 에러 처리는 어떻게 하는 게 좋아?"
```

### API 테스트하기

**프롬프트: API 테스트 코드**

```
"ApiService를 테스트하는 코드를 작성해줘.

시나리오:
1. GET 요청으로 모든 todos 가져오기 (처음 5개만 출력)
2. GET 요청으로 id=1인 todo 가져오기
3. POST 요청으로 새 todo 생성
4. PUT 요청으로 todo 수정
5. DELETE 요청으로 todo 삭제

각 단계마다:
- console.log로 요청 내용 출력
- console.log로 응답 결과 출력
- try-catch로 에러 처리

실행 가능한 코드로 작성해줘."
```

**직접 실행해보기:**

```typescript
// 받은 테스트 코드를 실행하고 결과 확인
// 1. 어떤 데이터가 반환되나?
// 2. POST/PUT/DELETE가 실제로 동작하나?
// 3. 에러가 발생하면 어떻게 처리되나?
```

---

## 📝 Step 4: TodoManager와 API 연동

이제 TodoManager가 API를 사용하도록 연결해봅시다.

### 당신의 계획

```
생각해보기:
- TodoManager가 ApiService를 어떻게 가져야 할까?
- 서버에서 데이터를 가져오는 시점은?
- 로컬 데이터와 서버 데이터를 어떻게 동기화할까?

내 생각:
┌─────────────────────────────────────┐
│                                     │
│  ________________________________   │
│  ________________________________   │
│  ________________________________   │
│                                     │
└─────────────────────────────────────┘
```

### AI에게 요청하기

**프롬프트 예시 1: 생성자 수정**

```
"TodoManager 클래스의 생성자를 수정해줘.

요구사항:
1. private apiService: ApiService 속성 추가
2. constructor에서 ApiService 인스턴스를 매개변수로 받기
3. 의존성 주입 패턴 사용

조건:
- apiService를 private으로 저장
- JSDoc 주석 추가

예시:
const apiService = new ApiService();
const manager = new TodoManager(apiService);
"
```

**프롬프트 예시 2: 서버에서 데이터 가져오기**

```
"TodoManager에 fetchFromServer 메서드를 추가해줘.

요구사항:
1. async 메서드
2. apiService.get()으로 /todos 호출
3. 받은 데이터를 this.todos에 저장
4. nextId를 가장 큰 id + 1로 설정
5. 성공하면 가져온 개수 반환

조건:
- try-catch로 에러 처리
- 에러 발생 시 에러 메시지 출력하고 0 반환
- JSDoc 주석

예시:
const count = await manager.fetchFromServer();
console.log(\`\${count}개의 할 일을 가져왔습니다.\`);
"
```

**프롬프트 예시 3: 특정 사용자의 할 일만 가져오기**

```
"TodoManager에 fetchUserTodos 메서드를 추가해줘.

요구사항:
1. async 메서드
2. 매개변수: userId (숫자)
3. /todos?userId={userId} 호출
4. 해당 사용자의 할 일만 저장
5. 성공하면 가져온 개수 반환

조건:
- try-catch로 에러 처리
- JSDoc 주석

예시:
const count = await manager.fetchUserTodos(1);
console.log(\`사용자 1의 할 일 \${count}개를 가져왔습니다.\`);
"
```

**프롬프트 예시 4: 서버와 동기화**

```
"TodoManager에 다음 메서드들을 추가해줘:

1. async createTodoOnServer(title: string, userId: number): Promise<Todo | null>
   - 로컬에 추가 (addTodo)
   - 서버에도 POST 요청으로 생성
   - 성공하면 Todo 반환, 실패하면 null
   
2. async deleteTodoOnServer(id: number): Promise<boolean>
   - 로컬에서 삭제 (deleteTodo)
   - 서버에도 DELETE 요청
   - 성공하면 true, 실패하면 false
   
3. async updateTodoOnServer(id: number, updates: Partial<Todo>): Promise<boolean>
   - 로컬에서 수정
   - 서버에도 PUT 요청
   - 성공하면 true, 실패하면 false

조건:
- 각 메서드 try-catch로 에러 처리
- 서버 요청 실패 시 로컬 변경도 롤백
- JSDoc 주석
"
```

### 받은 코드 분석

**[ ] 이해하기**

```
□ 의존성 주입이란?
□ async/await가 여러 개 있을 때 순서는?
□ 롤백(rollback)은 왜 필요한가?
□ Partial<Todo>는 무엇인가?
```

**질문 예시:**

```
"의존성 주입의 장점을 예시로 설명해줘"
"Promise.all을 사용하면 어떤 점이 좋아?"
"트랜잭션 롤백 패턴을 설명해줘"
```

### 통합 테스트하기

**프롬프트: 통합 테스트 코드**

```
"TodoManager와 ApiService를 함께 테스트하는 코드를 작성해줘.

시나리오:
1. ApiService와 TodoManager 생성
2. 서버에서 사용자 1의 할 일 가져오기
3. 가져온 할 일 출력 (처음 5개)
4. 새 할 일 생성 (서버와 동기화)
5. 생성된 할 일 완료 처리 (서버와 동기화)
6. 완료된 할 일 삭제 (서버와 동기화)
7. 최종 상태 출력

각 단계:
- 명확한 구분선 출력
- 작업 내용과 결과 출력
- 에러 발생 시 처리

실행 가능한 완전한 코드로 작성해줘."
```

---

## 📝 Step 5: UI 개선 및 추가 기능

기본 기능이 완성되었다면, 사용자 경험을 개선해봅시다.

### 추가 기능 아이디어

```
생각해보기:
어떤 기능을 추가하면 좋을까?

아이디어:
□ 할 일 검색 기능
□ 우선순위 설정
□ 마감일 추가
□ 카테고리/태그
□ 통계 (완료율, 총 개수 등)
□ 정렬 기능
□ 일괄 작업 (전체 완료, 전체 삭제)
□ 로딩 상태 표시
□ 에러 메시지 개선

내가 선택한 기능:
1. _________________________
2. _________________________
3. _________________________
```

### AI와 협업하여 기능 추가

**프롬프트 예시: 검색 기능**

```
"TodoManager에 searchTodos 메서드를 추가해줘.

요구사항:
1. 매개변수: query (문자열)
2. title에 query가 포함된 할 일만 반환
3. 대소문자 구분 없이 검색
4. 빈 문자열이면 전체 반환

조건:
- filter 메서드 사용
- includes 메서드 사용
- toLowerCase()로 대소문자 처리
- JSDoc 주석

예시:
const results = manager.searchTodos("공부");
// title에 "공부"가 포함된 할 일들
"
```

**프롬프트 예시: 통계 기능**

```
"TodoManager에 getStatistics 메서드를 추가해줘.

요구사항:
반환값 (객체):
- total: 전체 할 일 개수
- completed: 완료된 할 일 개수
- active: 미완료 할 일 개수
- completionRate: 완료율 (퍼센트, 소수점 1자리)

조건:
- 타입을 interface로 정의
- total이 0이면 completionRate도 0
- JSDoc 주석

예시:
const stats = manager.getStatistics();
// { total: 10, completed: 7, active: 3, completionRate: 70.0 }
"
```

**프롬프트 예시: 정렬 기능**

```
"TodoManager에 정렬 기능을 추가해줘.

요구사항:
1. getSortedTodos(sortBy: SortType): Todo[]
2. SortType: "id" | "title" | "completed"
3. id: 오름차순
4. title: 알파벳순
5. completed: 완료된 것이 아래로

조건:
- 원본 배열 수정하지 않음
- sort 메서드 사용
- SortType 타입 정의
- JSDoc 주석

예시:
const sorted = manager.getSortedTodos("title");
"
```

---
