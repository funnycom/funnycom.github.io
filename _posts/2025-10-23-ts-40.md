---
title: "[TS] ê³ ê¸‰ íƒ€ì… ê¸°ë²• - 3"
date: 2025-10-23 14:05:00 +0900
categories: [ì›¹ ê°œë°œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸]
tags: [ì›¹ê°œë°œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, TS, ê³ ê¸‰íƒ€ì…]
pin: true
math: true
mermaid: true
---

## ğŸ¯ í•™ìŠµ ëª©í‘œ

* ì¡°ê±´ë¶€ íƒ€ì…ìœ¼ë¡œ íƒ€ì…ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤
* infer í‚¤ì›Œë“œë¡œ íƒ€ì…ì„ ì¶”ë¡ í•˜ê³  ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤
* ë§¤í•‘ íƒ€ì…ìœ¼ë¡œ ê¸°ì¡´ íƒ€ì…ì„ ë³€í™˜í•  ìˆ˜ ìˆë‹¤
* í…œí”Œë¦¿ ë¦¬í„°ëŸ´ íƒ€ì…ìœ¼ë¡œ ë¬¸ìì—´ íƒ€ì…ì„ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤
* ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤
* isì™€ asserts í‚¤ì›Œë“œë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤
* íƒ€ì… ë‹¨ì–¸ì„ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
* ì¸ë±ìŠ¤ ì ‘ê·¼ íƒ€ì…ìœ¼ë¡œ ì¤‘ì²©ëœ íƒ€ì…ì„ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤

---

## 14.6 ì¸ë±ìŠ¤ ì ‘ê·¼ íƒ€ì…

ì¸ë±ìŠ¤ ì ‘ê·¼ íƒ€ì…ì€ **ë‹¤ë¥¸ íƒ€ì…ì˜ ì†ì„± íƒ€ì…ì„ ì¶”ì¶œ**í•©ë‹ˆë‹¤.

### T[K] íŒ¨í„´

**ê¸°ë³¸ ë¬¸ë²•:**
```typescript
type PropertyType = Type[PropertyName]
```

**ì˜ˆì œ 1: ë‹¨ì¼ ì†ì„± ì ‘ê·¼**
```typescript
interface User {
  id: number;
  name: string;
  email: string;
  age: number;
}

type UserId = User["id"];      // number
type UserName = User["name"];  // string
type UserEmail = User["email"]; // string

// ì‚¬ìš©
function getUserId(user: User): UserId {
  return user.id;
}
```

**ì˜ˆì œ 2: ì—¬ëŸ¬ ì†ì„± ì ‘ê·¼**
```typescript
type UserIdOrName = User["id" | "name"];
// number | string

type UserContact = User["email" | "age"];
// string | number

// ëª¨ë“  ì†ì„± íƒ€ì…ì˜ ìœ ë‹ˆì˜¨
type UserValues = User[keyof User];
// number | string
```

**ì˜ˆì œ 3: ë°°ì—´ ìš”ì†Œ íƒ€ì…**
```typescript
const users = [
  { id: 1, name: "í™ê¸¸ë™" },
  { id: 2, name: "ê¹€ì² ìˆ˜" }
];

type User = typeof users[number];
// { id: number; name: string }

const numbers = [1, 2, 3] as const;
type Num = typeof numbers[number];
// 1 | 2 | 3
```

### ì¤‘ì²© ê°ì²´ íƒ€ì… ì¶”ì¶œ

**ì˜ˆì œ 1: ê¹Šì€ ì†ì„± ì ‘ê·¼**
```typescript
interface Company {
  name: string;
  ceo: {
    name: string;
    age: number;
    contact: {
      email: string;
      phone: string;
    };
  };
  employees: {
    id: number;
    name: string;
  }[];
}

// ì¤‘ì²© ê°ì²´ íƒ€ì… ì¶”ì¶œ
type CEO = Company["ceo"];
// { name: string; age: number; contact: { email: string; phone: string } }

type CEOContact = Company["ceo"]["contact"];
// { email: string; phone: string }

type CEOEmail = Company["ceo"]["contact"]["email"];
// string

// ë°°ì—´ ìš”ì†Œ íƒ€ì…
type Employee = Company["employees"][number];
// { id: number; name: string }
```

**ì˜ˆì œ 2: ë™ì  ê²½ë¡œ ì ‘ê·¼**
```typescript
type DeepValue<T, Path extends string> = 
  Path extends `${infer K}.${infer Rest}`
    ? K extends keyof T
      ? DeepValue<T[K], Rest>
      : never
    : Path extends keyof T
      ? T[Path]
: never;

interface Company {
  name: string;
  ceo: {
    name: string;
    age: number;
    contact: {
      email: string;
      phone: string;
    };
  };
}

type CeoName = DeepValue<Company, "ceo.name">;  // string
type CeoEmail = DeepValue<Company, "ceo.contact.email">;  // string

// ì‚¬ìš©
function getDeepValue<T, Path extends string>(
  obj: T,
  path: Path
): DeepValue<T, Path> {
  const keys = path.split(".");
  let result: any = obj;
  
  for (const key of keys) {
    result = result[key];
  }
  
  return result;
}

const company: Company = {
  name: "Example Corp",
  ceo: {
    name: "í™ê¸¸ë™",
    age: 45,
    contact: {
      email: "ceo@example.com",
      phone: "010-1234-5678"
    }
  }
};

const ceoEmail = getDeepValue(company, "ceo.contact.email");
// "ceo@example.com" (íƒ€ì…: string)
```

### ì‹¤ì „ ì˜ˆì œ 1: API ì‘ë‹µ íƒ€ì… ì¶”ì¶œ
```typescript
interface ApiResponse {
  data: {
    users: {
      id: number;
      profile: {
        name: string;
        avatar: string;
      };
    }[];
    metadata: {
      total: number;
      page: number;
    };
  };
  error: string | null;
}

// íƒ€ì… ì¶”ì¶œ
type User = ApiResponse["data"]["users"][number];
// { id: number; profile: { name: string; avatar: string } }

type UserProfile = User["profile"];
// { name: string; avatar: string }

type Metadata = ApiResponse["data"]["metadata"];
// { total: number; page: number }

// ì‚¬ìš©
function processUsers(users: User[]) {
  users.forEach(user => {
    console.log(user.id, user.profile.name);
  });
}
```

#### ì‹¤ì „ ì˜ˆì œ 2: í¼ í•„ë“œ íƒ€ì…
```typescript
interface FormSchema {
  username: {
    type: "text";
    required: true;
    minLength: 3;
  };
  email: {
    type: "email";
    required: true;
    pattern: RegExp;
  };
  age: {
    type: "number";
    required: false;
    min: 0;
    max: 150;
  };
}

// íŠ¹ì • í•„ë“œì˜ ì„¤ì • íƒ€ì… ì¶”ì¶œ
type UsernameConfig = FormSchema["username"];
// { type: "text"; required: true; minLength: 3 }

type EmailConfig = FormSchema["email"];
// { type: "email"; required: true; pattern: RegExp }

// ëª¨ë“  í•„ë“œ ì„¤ì •ì˜ ìœ ë‹ˆì˜¨
type FieldConfig = FormSchema[keyof FormSchema];
/*
{
  type: "text";
  required: true;
  minLength: 3;
} | {
  type: "email";
  required: true;
  pattern: RegExp;
} | {
  type: "number";
  required: false;
  min: 0;
  max: 150;
}
*/

// í•„ë“œ íƒ€ì…ë§Œ ì¶”ì¶œ
type FieldType = FormSchema[keyof FormSchema]["type"];
// "text" | "email" | "number"

// í•„ìˆ˜ í•„ë“œë§Œ ì¶”ì¶œ
type RequiredFields = {
  [K in keyof FormSchema]: FormSchema[K]["required"] extends true ? K : never;
}[keyof FormSchema];
// "username" | "email"
```

### ì‹¤ì „ ì˜ˆì œ 3: ìƒíƒœ ê´€ë¦¬
```typescript
interface State {
  user: {
    id: number;
    name: string;
    preferences: {
      theme: "light" | "dark";
      language: "ko" | "en";
    };
  };
  posts: {
    id: number;
    title: string;
    author: number;
  }[];
  ui: {
    isLoading: boolean;
    error: string | null;
  };
}

// íƒ€ì… ì¶”ì¶œ
type User = State["user"];
type UserPreferences = State["user"]["preferences"];
type Theme = State["user"]["preferences"]["theme"];  // "light" | "dark"
type Post = State["posts"][number];
type UI = State["ui"];

// Selector í•¨ìˆ˜
function selectUser(state: State): User {
  return state.user;
}

function selectTheme(state: State): Theme {
  return state.user.preferences.theme;
}

function selectPosts(state: State): Post[] {
  return state.posts;
}
ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ì™€ í•¨ê»˜ ì‚¬ìš©
typescriptinterface StringDictionary {
  [key: string]: string | number;
  name: string;
  age: number;
}

// ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ íƒ€ì… ì¶”ì¶œ
type DictValue = StringDictionary[string];
// string | number

// íŠ¹ì • í‚¤ì˜ íƒ€ì…
type NameType = StringDictionary["name"];  // string
type AgeType = StringDictionary["age"];    // number

// ë™ì  í‚¤ ì ‘ê·¼
function getValue<K extends keyof StringDictionary>(
  dict: StringDictionary,
  key: K
): StringDictionary[K] {
  return dict[key];
}

const dict: StringDictionary = {
  name: "í™ê¸¸ë™",
  age: 30
};

const name = getValue(dict, "name");  // string
const age = getValue(dict, "age");    // number
```

### ê³ ê¸‰ íŒ¨í„´: íƒ€ì… ë³€í™˜
```typescript
interface Original {
  id: number;
  name: string;
  createdAt: string;
  updatedAt: string;
}

// ë‚ ì§œ ë¬¸ìì—´ì„ Dateë¡œ ë³€í™˜
type ParseDates<T> = {
  [K in keyof T]: K extends `${string}At` ? Date : T[K];
};

type Parsed = ParseDates<Original>;
/*
{
  id: number;
  name: string;
  createdAt: Date;
  updatedAt: Date;
}
*/

// íŠ¹ì • íƒ€ì…ë§Œ ë³€í™˜
type StringToNumber<T> = {
  [K in keyof T]: T[K] extends string ? number : T[K];
};

type Converted = StringToNumber<Original>;
/*
{
  id: number;
  name: number;      // string â†’ number
  createdAt: number; // string â†’ number
  updatedAt: number; // string â†’ number
}
*/
```
