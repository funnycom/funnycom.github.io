---
title: "[TS] ëª¨ë“ˆ ì‹œìŠ¤í…œ - 2"
date: 2025-10-23 14:57:00 +0900
categories: [ì›¹ ê°œë°œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸]
tags: [ì›¹ê°œë°œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, TS, ëª¨ë“ˆ]
pin: true
math: true
mermaid: true
published: false
---

## ğŸ¯ í•™ìŠµ ëª©í‘œ

* ëª¨ë“ˆì˜ ê°œë…ê³¼ í•„ìš”ì„±ì„ ì´í•´í•œë‹¤
* ES Modulesì˜ import/export ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
* default exportì™€ named exportì˜ ì°¨ì´ë¥¼ ì•ˆë‹¤
* CommonJSì™€ ES Modulesì˜ ì°¨ì´ë¥¼ ì´í•´í•œë‹¤
* ëª¨ë“ˆ í•´ì„ ì „ëµ(ìƒëŒ€/ì ˆëŒ€ ê²½ë¡œ)ì„ ì´í•´í•œë‹¤
* íƒ€ì… ì„ ì–¸ íŒŒì¼(.d.ts)ì„ ì‘ì„±í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
* DefinitelyTypedë¥¼ í™œìš©í•˜ì—¬ íƒ€ì…ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤
* ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ëª¨ë“ˆì˜ ì°¨ì´ë¥¼ ì´í•´í•œë‹¤

---

## 15.3 CommonJS (ì°¸ê³ )

### requireì™€ module.exports

CommonJSëŠ” Node.jsì—ì„œ ì‚¬ìš©í•˜ë˜ ëª¨ë“ˆ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. TypeScriptë¡œ ê°œë°œí•˜ë”ë¼ë„ ë ˆê±°ì‹œ ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì•Œì•„ë‘˜ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

**ê¸°ë³¸ ë¬¸ë²•:**
```javascript
// ğŸ“ math.js (CommonJS)
function add(a, b) {
  return a + b;
}

function subtract(a, b) {
  return a - b;
}

// module.exportsë¡œ ë‚´ë³´ë‚´ê¸°
module.exports = {
  add: add,
  subtract: subtract
};

// ğŸ“ app.js
// requireë¡œ ê°€ì ¸ì˜¤ê¸°
const math = require('./math');

console.log(math.add(5, 3));       // 8
console.log(math.subtract(5, 3));  // 2
```

**ë‹¨ì¼ í•¨ìˆ˜ export:**
```javascript
// ğŸ“ logger.js
function log(message) {
  console.log(`[LOG] ${message}`);
}

module.exports = log;

// ğŸ“ app.js
const log = require('./logger');
log("Hello World");
```

**ì„ íƒì  export:**
```javascript
// ğŸ“ utils.js
function privateFunction() {
  return "This is private";
}

function publicFunction() {
  return "This is public";
}

// ê³µê°œí•  ê²ƒë§Œ exportsì— ì¶”ê°€
exports.publicFunction = publicFunction;
// privateFunctionì€ ë‚´ë³´ë‚´ì§€ ì•ŠìŒ (ë¹„ê³µê°œ)

// ğŸ“ app.js
const utils = require('./utils');
console.log(utils.publicFunction());  // âœ… OK
console.log(utils.privateFunction()); // âŒ undefined
```

**exports vs module.exports:**
```javascript
// exportsëŠ” module.exportsì˜ ì°¸ì¡°
console.log(exports === module.exports);  // true

// âœ… ë°©ë²• 1: exports ì‚¬ìš©
exports.add = function(a, b) {
  return a + b;
};

// âœ… ë°©ë²• 2: module.exports ì‚¬ìš©
module.exports.subtract = function(a, b) {
  return a - b;
};

// âŒ ì£¼ì˜: exportsë¥¼ ì¬í• ë‹¹í•˜ë©´ ì•ˆ ë¨!
exports = {
  multiply: function(a, b) {
    return a * b;
  }
};
// ì´ë ‡ê²Œ í•˜ë©´ exportsëŠ” ìƒˆ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ì§€ë§Œ
// module.exportsëŠ” ì—¬ì „íˆ ì›ë˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚´

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
module.exports = {
  multiply: function(a, b) {
    return a * b;
  }
};
```

### ES Modulesì™€ì˜ ì°¨ì´

**1. ë¬¸ë²• ì°¨ì´**
```typescript
// ES Modules (TypeScriptì—ì„œ ì‚¬ìš©)
// ğŸ“ user.ts
export interface User {
  id: number;
  name: string;
}

export function createUser(name: string): User {
  return { id: Date.now(), name };
}

// ğŸ“ app.ts
import { User, createUser } from './user';

// CommonJS (ë ˆê±°ì‹œ)
// ğŸ“ user.js
function createUser(name) {
  return { id: Date.now(), name: name };
}

module.exports = { createUser };

// ğŸ“ app.js
const { createUser } = require('./user');
```

**2. ë¡œë”© ë°©ì‹**
```typescript
// ES Modules: ì •ì  (ì»´íŒŒì¼ íƒ€ì„ì— ê²°ì •)
import { add } from './math';  // íŒŒì¼ ìµœìƒë‹¨ì— ìœ„ì¹˜í•´ì•¼ í•¨
// if (condition) {
//   import { add } from './math';  // âŒ ì—ëŸ¬! ì¡°ê±´ë¶€ ë¶ˆê°€
// }

// CommonJS: ë™ì  (ëŸ°íƒ€ì„ì— ê²°ì •)
if (condition) {
  const math = require('./math');  // âœ… OK (ì¡°ê±´ë¶€ ê°€ëŠ¥)
}

const moduleName = './math';
const math = require(moduleName);  // âœ… OK (ë™ì  ê²½ë¡œ ê°€ëŠ¥)
```

**3. ë¹„ë™ê¸° vs ë™ê¸°**
```typescript
// ES Modules: ë¹„ë™ê¸° ë¡œë”© ê°€ëŠ¥
const module = await import('./module');  // âœ… ë™ì  import (ë¹„ë™ê¸°)

// CommonJS: ë™ê¸° ë¡œë”©ë§Œ ê°€ëŠ¥
const module = require('./module');  // ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œ
```

**4. this ë°”ì¸ë”©**
```typescript
// ES Modules
console.log(this);  // undefined (strict mode)

// CommonJS
console.log(this);  // module.exports ê°ì²´
```

**5. Tree Shaking**
```typescript
// ES Modules: Tree Shaking ì§€ì› âœ…
// ğŸ“ utils.ts
export function usedFunction() { }
export function unusedFunction() { }  // ë¹Œë“œ ì‹œ ì œê±°ë¨

// ğŸ“ app.ts
import { usedFunction } from './utils';
// unusedFunctionì€ ë²ˆë“¤ì— í¬í•¨ë˜ì§€ ì•ŠìŒ!

// CommonJS: Tree Shaking ë¶ˆê°€ âŒ
// ğŸ“ utils.js
module.exports = {
  usedFunction: function() { },
  unusedFunction: function() { }  // ë¹Œë“œ ì‹œì—ë„ í¬í•¨ë¨
};

// ğŸ“ app.js
const { usedFunction } = require('./utils');
// unusedFunctionë„ ë²ˆë“¤ì— í¬í•¨ë¨
```

**ë¹„êµ í‘œ:**

| íŠ¹ì§• | ES Modules | CommonJS |
|------|-----------|----------|
| ë¬¸ë²• | `import/export` | `require/module.exports` |
| ë¡œë”© | ì •ì  (ì»´íŒŒì¼ íƒ€ì„) | ë™ì  (ëŸ°íƒ€ì„) |
| ë¹„ë™ê¸° | ì§€ì› (`await import()`) | ë¯¸ì§€ì› |
| Tree Shaking | ì§€ì› âœ… | ë¯¸ì§€ì› âŒ |
| ë¸Œë¼ìš°ì € ì§€ì› | ë„¤ì´í‹°ë¸Œ ì§€ì› | ë²ˆë“¤ëŸ¬ í•„ìš” |
| Node.js | v12+ ì§€ì› | ê¸°ë³¸ ì§€ì› |
| TypeScript | ê¶Œì¥ âœ… | ë ˆê±°ì‹œ |

### TypeScriptì—ì„œ CommonJS ì‚¬ìš© (tsconfig.json)
```json
// tsconfig.json
{
  "compilerOptions": {
    "module": "commonjs",  // CommonJSë¡œ ì»´íŒŒì¼
    "esModuleInterop": true  // ES ëª¨ë“ˆê³¼ í˜¸í™˜ì„± ê°œì„ 
  }
}
```

**TypeScript ì½”ë“œ (ES Modules ë¬¸ë²•):**
```typescript
// ğŸ“ user.ts
export interface User {
  id: number;
  name: string;
}

export function createUser(name: string): User {
  return { id: Date.now(), name };
}
```

**ì»´íŒŒì¼ëœ JavaScript (CommonJS):**
```javascript
// ğŸ“ user.js
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createUser = void 0;

function createUser(name) {
    return { id: Date.now(), name: name };
}
exports.createUser = createUser;
```

### ğŸ’¡ ì‹¤ë¬´ ê°€ì´ë“œ

**âœ… ìƒˆ í”„ë¡œì íŠ¸:**
- ES Modules ì‚¬ìš© (TypeScript ê¸°ë³¸)
- `"module": "esnext"` ë˜ëŠ” `"module": "es2020"` ì„¤ì •

**âš ï¸ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸:**
- ê¸°ì¡´ CommonJS ì½”ë“œ ìœ ì§€
- ì ì§„ì ìœ¼ë¡œ ES Modulesë¡œ ì „í™˜
- `esModuleInterop: true` ì„¤ì •ìœ¼ë¡œ í˜¸í™˜ì„± í™•ë³´

**ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜:**
```typescript
// Before (CommonJS)
const express = require('express');
const app = express();

module.exports = app;

// After (ES Modules)
import express from 'express';
const app = express();

export default app;
```

---

## 15.4 ëª¨ë“ˆ í•´ì„ (Module Resolution)

### ìƒëŒ€ ê²½ë¡œì™€ ì ˆëŒ€ ê²½ë¡œ

TypeScriptê°€ `import` ë¬¸ì„ ë§Œë‚˜ë©´ ëª¨ë“ˆì„ **ì–´ë–»ê²Œ ì°¾ì„ì§€** ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤.

**ìƒëŒ€ ê²½ë¡œ (Relative Import):**
```typescript
// ğŸ“ src/services/user.ts
export interface User {
  id: number;
  name: string;
}

// ğŸ“ src/controllers/user-controller.ts
// ìƒëŒ€ ê²½ë¡œë¡œ import
import { User } from '../services/user';  // âœ… OK
// ../ : ìƒìœ„ ë””ë ‰í† ë¦¬
// ./ : í˜„ì¬ ë””ë ‰í† ë¦¬

// ğŸ“ src/controllers/auth-controller.ts
import { User } from '../services/user';  // âœ… OK

// ğŸ“ src/models/index.ts
import { User } from '../services/user';  // âœ… OK
```

**ì ˆëŒ€ ê²½ë¡œ (Non-relative Import):**
```typescript
// node_modulesì—ì„œ ì°¾ê¸°
import express from 'express';  // node_modules/express
import { Request, Response } from 'express';

// @typesì—ì„œ íƒ€ì… ì°¾ê¸°
import React from 'react';  // node_modules/@types/react
```

**ê²½ë¡œ ë³„ì¹­ (Path Alias):**
```json
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": "./src",
    "paths": {
      "@/*": ["*"],
      "@models/*": ["models/*"],
      "@services/*": ["services/*"],
      "@utils/*": ["utils/*"]
    }
  }
}
```
```typescript
// Before (ìƒëŒ€ ê²½ë¡œ)
import { User } from '../../../models/user';
import { UserService } from '../../../services/user-service';
import { formatDate } from '../../../utils/date';

// After (ê²½ë¡œ ë³„ì¹­)
import { User } from '@models/user';
import { UserService } from '@services/user-service';
import { formatDate } from '@utils/date';

// ë˜ëŠ”
import { User } from '@/models/user';
import { UserService } from '@/services/user-service';
import { formatDate } from '@/utils/date';
```

**í”„ë¡œì íŠ¸ êµ¬ì¡° ì˜ˆì‹œ:**
```
src/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.ts
â”‚   â””â”€â”€ product.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ user-service.ts
â”‚   â””â”€â”€ product-service.ts
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ user-controller.ts
â”‚   â””â”€â”€ product-controller.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ date.ts
â”‚   â””â”€â”€ string.ts
â””â”€â”€ app.ts
```

**ê° íŒŒì¼ì—ì„œì˜ import:**
```typescript
// ğŸ“ src/app.ts
import { UserController } from './controllers/user-controller';  // ìƒëŒ€
import express from 'express';  // ì ˆëŒ€ (node_modules)
import { User } from '@models/user';  // ë³„ì¹­

// ğŸ“ src/controllers/user-controller.ts
import { User } from '../models/user';  // ìƒëŒ€
import { UserService } from '../services/user-service';  // ìƒëŒ€
import { formatDate } from '@utils/date';  // ë³„ì¹­

// ğŸ“ src/services/user-service.ts
import { User } from '../models/user';  // ìƒëŒ€
import { Database } from '@/database';  // ë³„ì¹­
```

### node_modules í•´ì„

**í•´ì„ ìˆœì„œ:**
```typescript
// import { something } from 'module-name';
// TypeScriptëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ì°¾ìŠµë‹ˆë‹¤:

1. node_modules/module-name/package.jsonì˜ "types" í•„ë“œ
   â†’ node_modules/module-name/index.d.ts

2. node_modules/module-name/index.ts

3. node_modules/@types/module-name/index.d.ts

4. ìƒìœ„ ë””ë ‰í† ë¦¬ì˜ node_modulesì—ì„œ 1-3 ë°˜ë³µ
```

**ì˜ˆì‹œ: express ëª¨ë“ˆ ì°¾ê¸°**
```typescript
import express from 'express';

// í•´ì„ ê³¼ì •:
// 1. í˜„ì¬ ë””ë ‰í† ë¦¬
//    ./node_modules/express/package.json
//    â†’ "types": "./index.d.ts" í™•ì¸

// 2. express ëª¨ë“ˆì˜ íƒ€ì… ì„ ì–¸
//    ./node_modules/express/index.d.ts ì°¾ìŒ âœ…

// ë˜ëŠ”
// ./node_modules/@types/express/index.d.ts ì°¾ìŒ âœ…
```

**package.jsonì˜ types í•„ë“œ:**
```json
// node_modules/some-package/package.json
{
  "name": "some-package",
  "version": "1.0.0",
  "main": "./dist/index.js",       // JavaScript ì§„ì…ì 
  "types": "./dist/index.d.ts",    // TypeScript íƒ€ì… ì„ ì–¸
  "typings": "./dist/index.d.ts"   // "types"ì™€ ë™ì¼ (ì˜›ë‚  ë°©ì‹)
}
```

**ëª¨ë“ˆ í•´ì„ ì „ëµ ì„¤ì •:**
```json
// tsconfig.json
{
  "compilerOptions": {
    "moduleResolution": "node",  // Node.js ë°©ì‹ (ê¸°ë³¸)
    // ë˜ëŠ”
    "moduleResolution": "classic"  // ì˜›ë‚  ë°©ì‹ (ì‚¬ìš© ì•ˆ í•¨)
  }
}
```

**Node.js í•´ì„ ì „ëµ:**
```typescript
// import { X } from 'module';

// 1. node_modules/module.ts
// 2. node_modules/module.tsx
// 3. node_modules/module.d.ts
// 4. node_modules/module/package.json (types í•„ë“œ)
// 5. node_modules/module/index.ts
// 6. node_modules/module/index.tsx
// 7. node_modules/module/index.d.ts

// ìƒëŒ€ ê²½ë¡œ: import { X } from './module';
// 1. ./module.ts
// 2. ./module.tsx
// 3. ./module.d.ts
// 4. ./module/package.json (types í•„ë“œ)
// 5. ./module/index.ts
// 6. ./module/index.tsx
// 7. ./module/index.d.ts
```

**ì‹¤ì „ ì˜ˆì œ: ëª¨ë“ˆ ì°¾ê¸° ë””ë²„ê¹…**
```bash
# TypeScript ì»´íŒŒì¼ëŸ¬ê°€ ëª¨ë“ˆì„ ì–´ë–»ê²Œ í•´ì„í•˜ëŠ”ì§€ í™•ì¸
tsc --traceResolution

# ì¶œë ¥ ì˜ˆì‹œ:
# ======== Resolving module 'express' from 'src/app.ts'. ========
# Module resolution kind is not specified, using 'NodeJs'.
# Loading module 'express' from 'node_modules' folder.
# File 'node_modules/express/package.json' exists according to earlier cached lookups.
# 'package.json' does not have a 'typings' field.
# File 'node_modules/express/index.ts' does not exist.
# File 'node_modules/express/index.tsx' does not exist.
# File 'node_modules/express/index.d.ts' does not exist.
# File 'node_modules/@types/express/package.json' exists according to earlier cached lookups.
# 'package.json' has 'types' field 'index.d.ts' that references 'node_modules/@types/express/index.d.ts'.
# File 'node_modules/@types/express/index.d.ts' exist - use it as a name resolution result.
# ======== Module name 'express' was successfully resolved to 'node_modules/@types/express/index.d.ts'. ========
```

---

## 15.5 íƒ€ì… ì„ ì–¸ íŒŒì¼ (.d.ts)

### íƒ€ì… ì„ ì–¸ íŒŒì¼ì´ë€?

íƒ€ì… ì„ ì–¸ íŒŒì¼ì€ **JavaScript ì½”ë“œì— ëŒ€í•œ íƒ€ì… ì •ë³´**ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**ì™œ í•„ìš”í• ê¹Œ?**
```javascript
// ğŸ“ legacy-lib.js (JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬)
function calculate(a, b, operation) {
  if (operation === 'add') {
    return a + b;
  } else if (operation === 'multiply') {
    return a * b;
  }
  return 0;
}

module.exports = { calculate };
```
```typescript
// ğŸ“ app.ts (TypeScript í”„ë¡œì íŠ¸)
import { calculate } from './legacy-lib';

// âŒ TypeScriptëŠ” calculateì˜ íƒ€ì…ì„ ëª¨ë¦„
const result = calculate(5, 3, 'add');  // any íƒ€ì…
```

**í•´ê²°: íƒ€ì… ì„ ì–¸ íŒŒì¼ ì‘ì„±**
```typescript
// ğŸ“ legacy-lib.d.ts
export function calculate(
  a: number,
  b: number,
  operation: 'add' | 'multiply'
): number;
```
```typescript
// ğŸ“ app.ts
import { calculate } from './legacy-lib';

// âœ… ì´ì œ TypeScriptê°€ íƒ€ì…ì„ ì•Œì•„ìš”!
const result = calculate(5, 3, 'add');  // number íƒ€ì…
const result2 = calculate(5, 3, 'divide');  // âŒ ì—ëŸ¬! 'divide'ëŠ” í—ˆìš© ì•ˆ ë¨
```

### íƒ€ì… ì„ ì–¸ ì‘ì„±í•˜ê¸°

**ê¸°ë³¸ í•¨ìˆ˜ ì„ ì–¸:**
```typescript
// ğŸ“ utils.d.ts
// í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ë§Œ ì„ ì–¸ (êµ¬í˜„ ì—†ìŒ)
export function formatDate(date: Date): string;
export function formatTime(date: Date): string;
export function formatDateTime(date: Date): string;
```

**ë³€ìˆ˜ ì„ ì–¸:**
```typescript
// ğŸ“ constants.d.ts
export const API_URL: string;
export const VERSION: string;
export const MAX_RETRIES: number;
```

**ì¸í„°í˜ì´ìŠ¤ì™€ íƒ€ì… ì„ ì–¸:**
```typescript
// ğŸ“ types.d.ts
export interface User {
  id: number;
  name: string;
  email: string;
}

export type UserRole = 'admin' | 'user' | 'guest';

export interface ApiResponse<T> {
  data: T;
  error: string | null;
  status: number;
}
```

**í´ë˜ìŠ¤ ì„ ì–¸:**
```typescript
// ğŸ“ database.d.ts
export class Database {
  constructor(connectionString: string);
  
  connect(): Promise<void>;
  disconnect(): Promise<void>;
  query<T>(sql: string, params?: any[]): Promise<T[]>;
}
```

**ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ ì–¸:**
```typescript
// ğŸ“ jquery.d.ts (ì˜ˆì‹œ)
declare namespace $ {
  function ajax(url: string, settings?: any): any;
  
  interface AjaxSettings {
    url?: string;
    type?: string;
    data?: any;
  }
}

// ì‚¬ìš©
$.ajax('/api/users', { type: 'GET' });
```

**ì „ì—­ ë³€ìˆ˜ ì„ ì–¸:**
```typescript
// ğŸ“ global.d.ts
declare global {
  // ì „ì—­ ë³€ìˆ˜
  const API_KEY: string;
  const DEBUG: boolean;
  
  // ì „ì—­ í•¨ìˆ˜
  function log(message: string): void;
  
  // ì „ì—­ ì¸í„°í˜ì´ìŠ¤ í™•ì¥
  interface Window {
    myCustomProperty: string;
  }
}

export {};  // ëª¨ë“ˆë¡œ ë§Œë“¤ê¸° ìœ„í•´ í•„ìš”
```
```typescript
// ğŸ“ app.ts
console.log(API_KEY);  // âœ… íƒ€ì… ì•ˆì „
log("Hello");  // âœ… íƒ€ì… ì•ˆì „
window.myCustomProperty = "value";  // âœ… íƒ€ì… ì•ˆì „
```

**ëª¨ë“ˆ í™•ì¥ (Module Augmentation):**
```typescript
// ğŸ“ express-extensions.d.ts
// ê¸°ì¡´ express ëª¨ë“ˆì— íƒ€ì… ì¶”ê°€
import 'express';

declare module 'express' {
  interface Request {
    user?: {
      id: number;
      name: string;
    };
  }
}
```
```typescript
// ğŸ“ app.ts
import express from 'express';

const app = express();

app.get('/profile', (req, res) => {
  // âœ… req.user ì‚¬ìš© ê°€ëŠ¥ (íƒ€ì… ì•ˆì „)
  if (req.user) {
    res.json({ name: req.user.name });
  }
});
```

### DefinitelyTyped (@types)

**DefinitelyTypedë€?**
- ìœ ëª…í•œ JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì˜ íƒ€ì… ì„ ì–¸ ëª¨ìŒ
- `@types/` ì ‘ë‘ì‚¬ë¡œ npmì— ë°°í¬
- ì»¤ë®¤ë‹ˆí‹°ê°€ ê´€ë¦¬

**íƒ€ì… ì„¤ì¹˜:**
```bash
# express ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
npm install express

# express íƒ€ì… ì„ ì–¸ ì„¤ì¹˜
npm install --save-dev @types/express

# node íƒ€ì… ì„ ì–¸ ì„¤ì¹˜
npm install --save-dev @types/node

# React íƒ€ì… ì„ ì–¸ ì„¤ì¹˜
npm install --save-dev @types/react @types/react-dom
```

**íƒ€ì…ì´ í•„ìš”í•œ ê²½ìš°:**
```typescript
// expressë¥¼ ì„¤ì¹˜í–ˆì§€ë§Œ íƒ€ì…ì´ ì—†ëŠ” ê²½ìš°
import express from 'express';  // âŒ ì—ëŸ¬! ë˜ëŠ” any íƒ€ì…

// @types/expressë¥¼ ì„¤ì¹˜í•˜ë©´
import express from 'express';  // âœ… íƒ€ì… ì•ˆì „!

const app = express();
app.listen(3000);  // âœ… ë©”ì„œë“œ ìë™ì™„ì„±
```

**íƒ€ì… í™•ì¸:**
```bash
# ì„¤ì¹˜ëœ íƒ€ì… í™•ì¸
ls node_modules/@types

# ì¶œë ¥:
# express/
# node/
# react/
# react-dom/
```

**íƒ€ì… ì„ ì–¸ íŒŒì¼ ìœ„ì¹˜:**
```
node_modules/
â””â”€â”€ @types/
    â”œâ”€â”€ express/
    â”‚   â”œâ”€â”€ index.d.ts
    â”‚   â””â”€â”€ package.json
    â”œâ”€â”€ node/
    â”‚   â”œâ”€â”€ index.d.ts
    â”‚   â”œâ”€â”€ globals.d.ts
    â”‚   â””â”€â”€ package.json
    â””â”€â”€ react/
        â”œâ”€â”€ index.d.ts
        â””â”€â”€ package.json
```

**íƒ€ì…ì´ ì—†ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬:**
```typescript
// some-lib ë¼ì´ë¸ŒëŸ¬ë¦¬ì— íƒ€ì…ì´ ì—†ëŠ” ê²½ìš°
import someLib from 'some-lib';  // âŒ ì•”ë¬µì  any

// í•´ê²° ë°©ë²• 1: ì§ì ‘ íƒ€ì… ì„ ì–¸ ì‘ì„±
// ğŸ“ src/types/some-lib.d.ts
declare module 'some-lib' {
  export function doSomething(param: string): number;
}

// í•´ê²° ë°©ë²• 2: anyë¡œ ì„ ì–¸ (ì„ì‹œ)
// ğŸ“ src/types/some-lib.d.ts
declare module 'some-lib';  // ëª¨ë“  ê²ƒì´ any

// í•´ê²° ë°©ë²• 3: tsconfig.jsonì—ì„œ ì—ëŸ¬ ë¬´ì‹œ
{
  "compilerOptions": {
    "noImplicitAny": false  // anyë¥¼ í—ˆìš© (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
  }
}
```

---

## 15.6 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (ì°¸ê³ )

### namespace í‚¤ì›Œë“œ

ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” **ì „ì—­ ìŠ¤ì½”í”„ ì˜¤ì—¼ì„ ë°©ì§€**í•˜ê¸° ìœ„í•œ ì˜›ë‚  ë°©ì‹ì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ES Modulesë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.

**ê¸°ë³¸ ë¬¸ë²•:**
```typescript
// ğŸ“ math.ts
namespace Math {
  export function add(a: number, b: number): number {
    return a + b;
  }
  
  export function subtract(a: number, b: number): number {
    return a - b;
  }
  
  // exportí•˜ì§€ ì•Šìœ¼ë©´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ë¶ˆê°€
  function privateHelper() {
    return "private";
  }
}

// ì‚¬ìš©
const sum = MathUtils.add(5, 3);  // 8
```

**ì¤‘ì²© ë„¤ì„ìŠ¤í˜ì´ìŠ¤:**
```typescript
namespace App {
  export namespace Models {
    export interface User {
      id: number;
      name: string;
    }
  }
  
  export namespace Services {
    export class UserService {
      getUser(id: number): Models.User {
        return { id, name: "User" };
      }
    }
  }
}

// ì‚¬ìš©
const user: App.Models.User = { id: 1, name: "í™ê¸¸ë™" };
const service = new App.Services.UserService();
```

**íŒŒì¼ ë¶„í• :**
```typescript
// ğŸ“ models.ts
namespace App {
  export interface User {
    id: number;
    name: string;
  }
}

// ğŸ“ services.ts
/// <reference path="models.ts" />  // ì˜ì¡´ì„± ëª…ì‹œ
namespace App {
  export class UserService {
    getUser(id: number): User {
      return { id, name: "User" };
    }
  }
}

// ğŸ“ app.ts
/// <reference path="models.ts" />
/// <reference path="services.ts" />

const service = new App.UserService();
```

### ëª¨ë“ˆê³¼ì˜ ì°¨ì´

**ë„¤ì„ìŠ¤í˜ì´ìŠ¤:**
```typescript
// ğŸ“ utils.ts
namespace Utils {
  export function formatDate(date: Date): string {
    return date.toISOString();
  }
}

// ì „ì—­ ìŠ¤ì½”í”„ì— Utilsê°€ ì¶”ê°€ë¨
// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ìë™ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥ (import ì—†ì´)
```

**ëª¨ë“ˆ:**
```typescript
// ğŸ“ utils.ts
export function formatDate(date: Date): string {
  return date.toISOString();
}

// ğŸ“ app.ts
import { formatDate } from './utils';  // ëª…ì‹œì  import í•„ìš”
```

**ë¹„êµ í‘œ:**

| íŠ¹ì§• | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ | ëª¨ë“ˆ (ES Modules) |
|------|------------|------------------|
| ìŠ¤ì½”í”„ | ì „ì—­ | íŒŒì¼ ë‹¨ìœ„ |
| ì‚¬ìš©ë²• | `namespace Name { }` | `export/import` |
| ì˜ì¡´ì„± | `/// <reference>` | `import` |
| ë²ˆë“¤ë§ | ìˆ˜ë™ ì—°ê²° í•„ìš” | ìë™ |
| ê¶Œì¥ | âŒ (ë ˆê±°ì‹œ) | âœ… (í˜„ëŒ€ì ) |

**ğŸ’¡ ì–¸ì œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í• ê¹Œ?**
```typescript
// âŒ ìƒˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”
// ëŒ€ì‹  ES Modules ì‚¬ìš©

// âœ… ë ˆê±°ì‹œ ì½”ë“œ ìœ ì§€ë³´ìˆ˜í•  ë•Œë§Œ
// âœ… ì „ì—­ íƒ€ì… ì„ ì–¸í•  ë•Œë§Œ (declare namespace)

// ì „ì—­ íƒ€ì… ì„ ì–¸ ì˜ˆì‹œ:
declare namespace NodeJS {
  interface ProcessEnv {
    NODE_ENV: 'development' | 'production';
    API_KEY: string;
  }
}

// ì‚¬ìš©
console.log(process.env.NODE_ENV);  // âœ… íƒ€ì… ì•ˆì „
```

---

## ğŸ’¡ ëª¨ë“ˆ ì‹œìŠ¤í…œ Best Practices

### 1. íŒŒì¼ êµ¬ì¡°
```
src/
â”œâ”€â”€ models/           # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ user.ts
â”‚   â”œâ”€â”€ product.ts
â”‚   â””â”€â”€ index.ts     # re-export
â”œâ”€â”€ services/         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ user-service.ts
â”‚   â”œâ”€â”€ product-service.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ utils/            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ date.ts
â”‚   â”œâ”€â”€ string.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ types/            # ê³µí†µ íƒ€ì… ì„ ì–¸
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ common.ts
â”‚   â””â”€â”€ index.ts
â””â”€â”€ app.ts           # ì§„ì…ì 
```

### 2. import ìˆœì„œ
```typescript
// âœ… ì¢‹ì€ ìˆœì„œ
// 1. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
import express from 'express';
import { Request, Response } from 'express';

// 2. ë‚´ë¶€ ì ˆëŒ€ ê²½ë¡œ (ë³„ì¹­)
import { User } from '@models/user';
import { UserService } from '@services/user-service';

// 3. ë‚´ë¶€ ìƒëŒ€ ê²½ë¡œ
import { formatDate } from './utils/date';
import { logger } from './logger';

// 4. íƒ€ì…ë§Œ import (TypeScript 3.8+)
import type { Config } from './types';
```

### 3. ìˆœí™˜ ì˜ì¡´ì„± í”¼í•˜ê¸°
```typescript
// âŒ ë‚˜ìœ ì˜ˆ: ìˆœí™˜ ì˜ì¡´ì„±
// ğŸ“ user.ts
import { Post } from './post';

export interface User {
  id: number;
  posts: Post[];
}

// ğŸ“ post.ts
import { User } from './user';  // âŒ ìˆœí™˜!

export interface Post {
  id: number;
  author: User;
}

// âœ… ì¢‹ì€ ì˜ˆ: íƒ€ì… ë¶„ë¦¬
// ğŸ“ types.ts
export interface User {
  id: number;
  posts: Post[];
}

export interface Post {
  id: number;
  author: User;
}

// ğŸ“ user.ts
import { User } from './types';
export { User };

// ğŸ“ post.ts
import { Post } from './types';
export { Post };
```

### 4. Barrel Exports (index.ts)
```typescript
// ğŸ“ models/index.ts
// âœ… ì¢‹ì€ re-export
export { User } from './user';
export { Product } from './product';
export { Order } from './order';

// âŒ í”¼í•´ì•¼ í•  ê²ƒ
export * from './user';  // ë„ˆë¬´ ë§ì€ ê²ƒì„ ë…¸ì¶œ
export * from './product';
export * from './order';
// â†’ ì´ë¦„ ì¶©ëŒ ê°€ëŠ¥ì„±
```

### 5. íƒ€ì…ë§Œ import (ì„±ëŠ¥ ìµœì í™”)
```typescript
// TypeScript 3.8+
import type { User } from './models/user';
import type { Product } from './models/product';

// ëŸ°íƒ€ì„ì—ëŠ” ì œê±°ë˜ê³  íƒ€ì… ì²´í¬ì—ë§Œ ì‚¬ìš©
function processUser(user: User) {
  // ...
}
```

---

## ğŸ¯ Chapter 15 ì •ë¦¬

### í•µì‹¬ ê°œë…
