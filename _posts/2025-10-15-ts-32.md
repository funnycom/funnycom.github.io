---
title: "[Projects] 날씨 대시보드 앱 - 3"
date: 2025-10-15 17:30:00 +0900
categories: [웹 개발, 타입스크립트]
tags: [웹개발, 타입스크립트, TS]
pin: true
math: true
mermaid: true
---

> **프로젝트 목표**
> - 실시간 외부 API를 마스터한다
> - 데이터 캐싱 전략을 학습한다
> - 비동기 처리 패턴을 심화한다
> - 사용자 경험(UX)을 고려한 설계를 한다
> - 완전히 자율적으로 프로젝트를 진행한다

---

## Part 3: 스스로 개선하기 (2-3시간)

**완전 자율의 시간입니다!**

Part 3에서는 AI의 도움을 **최소화**합니다.
여러분이 직접 기능을 설계하고, 구현하고, 테스트합니다.

### 🎯 Part 3의 목표
```
1. 창의적으로 기능 추가
2. 코드 리팩토링 및 최적화
3. 사용자 경험 개선
4. 포트폴리오 완성
5. 전체 프로젝트 회고
```

### 🚫 AI 사용 규칙
```
✅ 허용:
- 특정 API 문서 찾기
- 에러 메시지 해석
- 코드 리뷰 요청
- 아이디어 검증

❌ 금지:
- "이 기능 구현해줘"
- "전체 코드 작성해줘"
- 설계 없이 바로 요청

원칙: 먼저 스스로 구현 시도 (최소 30분)
      → 막히면 구체적인 질문만
```

---

## 🎨 Level 1: 기본 개선 (필수)

최소 2개 이상 선택하여 구현하세요.

### 과제 1-1: 여러 API 지원

**목표:** OpenWeather 외에 다른 날씨 API도 지원

**요구사항:**
```
1. 추상 WeatherApi 인터페이스 정의
2. OpenWeatherApi 구현
3. WeatherApiProvider (대안 API) 구현
4. Dashboard에서 API 선택 가능

추천 대안 API:
- WeatherAPI (https://www.weatherapi.com/)
- Tomorrow.io (https://www.tomorrow.io/)
```

**설계부터 시작:**
```
[ ] 1. 인터페이스 설계 (10분)

interface IWeatherApi {
  // 어떤 메서드가 필요한가?
  getCurrentWeather(city: string): Promise<WeatherData>;
  // 더 필요한 메서드는?
}

내 설계:
┌─────────────────────────────────────┐
│  interface IWeatherApi {           │
│    _____________________________   │
│    _____________________________   │
│  }                                  │
│                                     │
│  class OpenWeatherApi              │
│    implements IWeatherApi { }      │
│                                     │
│  class WeatherApiProvider          │
│    implements IWeatherApi { }      │
│                                     │
│  class WeatherDashboard {          │
│    constructor(api: IWeatherApi) { }│
│  }                                  │
└─────────────────────────────────────┘
```

**[ ] 2. 구현 (30분)**
```typescript
// 스스로 구현
// 막히면 아래 질문만 AI에게

// 막혔을 때만 질문:
// "인터페이스를 구현할 때 추상 메서드를 
//  모두 구현해야 하는 이유를 설명해줘"
```

**[ ] 3. 테스트 (10분)**
```typescript
// 두 API를 번갈아 사용하며 테스트
const openWeather = new OpenWeatherApi(API_KEY_1);
const weatherApi = new WeatherApiProvider(API_KEY_2);

const dashboard1 = new WeatherDashboard(openWeather);
const dashboard2 = new WeatherDashboard(weatherApi);

// 같은 도시를 조회하여 결과 비교
```

**완료 체크:**
```
□ 인터페이스 정의 완료
□ 최소 2개 API 구현
□ Dashboard 통합
□ 테스트 완료
```

---

### 과제 1-2: 위치 기반 자동 조회

**목표:** 사용자의 현재 위치로 자동 날씨 조회

**요구사항:**
```
1. IP 기반 위치 추적
2. 좌표로 날씨 조회
3. 자동 즐겨찾기 추가
```

**사용할 API:**
```
IP 위치 API (무료):
- https://ipapi.co/json/
- https://ip-api.com/json/

반환 데이터:
{
  "city": "Seoul",
  "country": "South Korea",
  "latitude": 37.5665,
  "longitude": 126.9780
}
```

**[ ] 1. 설계 (10분)**
```
새로운 클래스가 필요한가?

옵션 1: LocationService 클래스
  - getLocation(): Promise<Location>
  
옵션 2: Dashboard에 메서드 추가
  - async detectLocation(): Promise<string>

내 선택: _____________________________
이유: _________________________________

구현 계획:
1. _____________________________________
2. _____________________________________
3. _____________________________________
```

**[ ] 2. 구현 (40분)**
```typescript
// 스스로 구현해보세요

interface Location {
  city: string;
  country: string;
  latitude: number;
  longitude: number;
}

class LocationService {
  async getCurrentLocation(): Promise<Location> {
    // IP API 호출
    // 에러 처리
  }
}

// WeatherApiService에 추가:
async getWeatherByCoords(
  lat: number, 
  lon: number
): Promise<WeatherData> {
  // 좌표로 날씨 조회
}

// Dashboard에 추가:
async autoDetectWeather(): Promise<void> {
  // 1. 위치 감지
  // 2. 날씨 조회
  // 3. 즐겨찾기 추가
}
```

**[ ] 3. 통합 (10분)**
```typescript
// main에서 사용
const dashboard = new WeatherDashboard(apiKey);

console.log("🌍 현재 위치 감지 중...");
await dashboard.autoDetectWeather();
dashboard.printDashboard();
```

**완료 체크:**
```
□ 위치 감지 성공
□ 좌표로 날씨 조회 성공
□ 자동 즐겨찾기 추가
□ 에러 처리 완료
```

---

### 과제 1-3: 검색 히스토리

**목표:** 조회한 도시 기록 및 재검색

**요구사항:**
```
1. 검색한 도시 자동 저장
2. 최근 10개 유지
3. 히스토리에서 빠른 재조회
4. localStorage 영속성
```

**[ ] 1. 설계 (10분)**
```
데이터 구조:

interface SearchHistoryItem {
  city: string;
  timestamp: Date;
  // 추가 정보?
}

class SearchHistory {
  private history: SearchHistoryItem[];
  private maxSize: number = 10;
  
  add(city: string): void { }
  getRecent(count?: number): string[] { }
  clear(): void { }
  save(): void { }  // localStorage
  load(): void { }  // localStorage
}

Dashboard 통합:
- getWeather 호출 시 자동으로 히스토리 추가
```

**[ ] 2. 구현 (30분)**
```typescript
// 완전히 스스로 구현

// 힌트만 필요하면:
// "배열 앞에 요소를 추가하는 방법"
// "배열을 최근순으로 정렬하는 방법"
// "중복 제거하는 방법"
```

**[ ] 3. UI 추가 (10분)**
```typescript
printHistory(): void {
  console.log("\n📜 === 최근 검색 ===");
  const history = this.searchHistory.getRecent(5);
  history.forEach((city, index) => {
    console.log(`${index + 1}. ${city}`);
  });
}
```

**완료 체크:**
```
□ 히스토리 저장/조회
□ 최신순 정렬
□ 중복 제거
□ localStorage 저장
□ 출력 기능
```

---

### 과제 1-4: 날씨 알림 시스템

**목표:** 특정 조건에 알림 표시

**요구사항:**
```
1. 알림 규칙 설정
   - 온도가 30도 이상이면
   - 비가 오면
   - 사용자 정의 조건
   
2. 알림 확인 및 표시
3. 알림 히스토리
```

**[ ] 1. 설계 (15분)**
```
알림 규칙 타입:

interface AlertRule {
  id: string;
  city: string;
  condition: AlertCondition;
  message: string;
  enabled: boolean;
}

type AlertCondition = 
  | { type: "temp_above", value: number }
  | { type: "temp_below", value: number }
  | { type: "weather_is", value: string }
  | { type: "humidity_above", value: number };

class AlertManager {
  private rules: AlertRule[];
  
  addRule(rule: AlertRule): void { }
  checkAlerts(weather: WeatherData): Alert[] { }
  printAlerts(): void { }
}

내 설계:
_________________________________________
_________________________________________
```

**[ ] 2. 구현 (40분)**
```typescript
// 스스로 구현

// 예시 사용:
const alertManager = new AlertManager();

alertManager.addRule({
  id: "hot-weather",
  city: "Seoul",
  condition: { type: "temp_above", value: 30 },
  message: "🔥 서울 날씨가 매우 덥습니다!",
  enabled: true
});

// 날씨 조회 후 알림 확인
const weather = await dashboard.getWeather("Seoul");
const alerts = alertManager.checkAlerts(weather);

if (alerts.length > 0) {
  console.log("\n⚠️ === 알림 ===");
  alerts.forEach(alert => {
    console.log(`${alert.message}`);
  });
}
```

**[ ] 3. Dashboard 통합 (10분)**
```typescript
class WeatherDashboard {
  private alertManager: AlertManager;
  
  async getWeather(city: string): Promise<WeatherData> {
    const weather = await /* ... */;
    
    // 알림 확인
    const alerts = this.alertManager.checkAlerts(weather);
    if (alerts.length > 0) {
      this.printAlerts(alerts);
    }
    
    return weather;
  }
}
```

**완료 체크:**
```
□ 알림 규칙 정의
□ 조건 체크 로직
□ 알림 표시
□ Dashboard 통합
□ 테스트 완료
```

---

## 🚀 Level 2: 중급 도전 (선택)

최소 1개 이상 선택하여 구현하세요.

### 과제 2-1: 도시 비교 기능

**목표:** 여러 도시의 날씨를 비교 표시

**요구사항:**
```
1. 선택한 도시들의 날씨를 나란히 표시
2. 온도 차이 계산
3. 가장 더운/추운 도시 표시
4. 비교 결과 저장
```

**[ ] 설계 및 구현 (60분)**
```
출력 예시:

=== 도시 비교 ===

도시      온도    체감   날씨     습도
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
서울      5°C    2°C    ☀️ 맑음   45%
도쿄     10°C    8°C    ☁️ 흐림   65%
뉴욕      3°C    0°C    🌧️ 비    80%

📊 분석:
- 가장 더운 도시: 도쿄 (10°C)
- 가장 추운 도시: 뉴욕 (3°C)
- 온도 차이: 7°C
- 맑은 날씨: 서울

구현 계획:
1. compareWeather(cities: string[]): Promise<Comparison>
2. 표 형식 출력
3. 통계 계산
```

**완전 자율 구현:**
```typescript
// 설계부터 구현까지 모두 스스로
// 막히면 30분 후에만 질문
```

**완료 체크:**
```
□ 비교 기능 구현
□ 표 형식 출력
□ 통계 계산
□ 테스트 완료
```

---

### 과제 2-2: 날씨 기반 추천

**목표:** 날씨에 따른 옷차림, 활동 추천

**요구사항:**
```
1. 날씨 분석
   - 온도 구간별
   - 날씨 상태별
   - 습도/풍속 고려
   
2. 추천 생성
   - 옷차림 추천
   - 실외 활동 추천
   - 건강 조언
```

**[ ] 설계 및 구현 (60분)**
```
추천 시스템 설계:

interface Recommendation {
  clothing: string[];      // 옷차림
  activities: string[];    // 활동
  health: string[];        // 건강 조언
}

class WeatherAdvisor {
  getRecommendations(weather: WeatherData): Recommendation {
    // 온도별, 날씨별 추천
  }
}

추천 규칙:
- 30°C 이상: "가벼운 옷", "선크림 필수", "야외활동 자제"
- 0°C 이하: "두꺼운 외투", "실내활동", "보온 유지"
- 비올 때: "우산", "실내활동", "미끄럼 주의"
// 더 추가...

내가 추가할 규칙:
_________________________________________
_________________________________________
```

**구현:**
```typescript
// 완전히 스스로 구현
```

**완료 체크:**
```
□ 추천 시스템 구현
□ 다양한 규칙 정의
□ Dashboard 통합
□ 출력 개선
```

---

### 과제 2-3: 온도 변화 그래프

**목표:** 5일 예보를 그래프로 표시 (ASCII)

**요구사항:**
```
1. 5일 예보 데이터 수집
2. ASCII 그래프 생성
3. 최고/최저 온도 표시
```

**[ ] 설계 (20분)**
```
출력 예시:

=== 5일 온도 예보 ===

15°C ┤                  ╭─╮
14°C ┤              ╭───╯ ╰╮
13°C ┤          ╭───╯      │
12°C ┤      ╭───╯          │
11°C ┤  ╭───╯              ╰─╮
10°C ┼──╯                    ╰─
     └───┴───┴───┴───┴───┴───┴
     월  화  수  목  금  토  일

구현 계획:
1. getForecast() 메서드 (이미 있다면 활용)
2. 일별 최고/최저 온도 추출
3. 그래프 생성 알고리즘
4. ASCII 문자로 그리기
```

**[ ] 구현 (40분)**
```typescript
// 도전적인 과제!
// 배열과 문자열 조작 능력 향상

class ChartRenderer {
  renderTemperatureChart(
    forecast: DailyForecast[]
  ): string {
    // 1. 최대/최소 온도 찾기
    // 2. 스케일 계산
    // 3. 각 높이에 해당하는 문자 결정
    // 4. 선 연결 (─ │ ╭ ╮ ╰ ╯)
  }
}
```

**완료 체크:**
```
□ 예보 데이터 수집
□ 그래프 생성 알고리즘
□ ASCII 렌더링
□ 보기 좋게 출력
```

---

### 과제 2-4: 데이터 내보내기

**목표:** 날씨 데이터를 파일로 저장

**요구사항:**
```
1. CSV 형식 내보내기
2. JSON 형식 내보내기
3. 히스토리 포함
4. 통계 요약 포함
```

**[ ] 구현 (40분)**
```typescript
class DataExporter {
  exportToCSV(
    data: WeatherData[], 
    filename: string
  ): void {
    // CSV 생성 및 파일 저장
  }
  
  exportToJSON(
    data: WeatherData[], 
    filename: string
  ): void {
    // JSON 생성 및 파일 저장
  }
  
  exportStatistics(filename: string): void {
    // 전체 통계 내보내기
  }
}

// Node.js fs 모듈 사용
import * as fs from 'fs';
```

**CSV 형식 예시:**
```csv
City,Temperature,FeelsLike,Condition,Humidity,WindSpeed,Timestamp
Seoul,5,2,Clear,45,12,2024-01-15T14:30:00
Tokyo,10,8,Clouds,65,15,2024-01-15T14:31:00
```

**완료 체크:**
```
□ CSV 내보내기
□ JSON 내보내기
□ 파일 저장 성공
□ 데이터 무결성 확인
```

---

## 🎯 Level 3: 고급 도전 (선택)

야심찬 개발자를 위한 도전 과제입니다.

### 과제 3-1: 날씨 예측 분석

**목표:** 간단한 예측 알고리즘 구현

**요구사항:**
```
1. 과거 데이터 수집 및 저장
2. 패턴 분석
3. 간단한 예측 알고리즘
4. 정확도 측정
```

**[ ] 설계 (30분)**
```
예측 알고리즘 아이디어:

1. 이동 평균 (Moving Average)
   - 최근 N일의 평균
   
2. 추세 분석
   - 온도가 상승/하락 추세?
   
3. 패턴 매칭
   - 비슷한 날씨 패턴 찾기

내가 구현할 방법:
_________________________________________
_________________________________________
```

**완전 자율 구현**

---

### 과제 3-2: 웹 UI 구현

**목표:** HTML/CSS로 시각적 대시보드

**요구사항:**
```
1. HTML 페이지 생성
2. CSS 스타일링
3. JavaScript로 데이터 연동
4. 실시간 업데이트
```

**[ ] 구현 (120분)**
```html
<!-- public/index.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Weather Dashboard</title>
  <style>
    /* 스타일 추가 */
  </style>
</head>
<body>
  <div id="dashboard">
    <!-- 날씨 카드들 -->
  </div>
  
  <script>
    // API 호출 및 렌더링
  </script>
</body>
</html>
```

**서버 추가:**
```typescript
import * as http from 'http';
import * as fs from 'fs';

const server = http.createServer((req, res) => {
  if (req.url === '/') {
    // HTML 서빙
  } else if (req.url === '/api/weather') {
    // API 엔드포인트
  }
});

server.listen(3000);
```

---

### 과제 3-3: 실시간 알림 서버

**목표:** WebSocket으로 실시간 알림

**요구사항:**
```
1. WebSocket 서버 구현
2. 클라이언트 연결 관리
3. 날씨 변화 감지
4. 자동 푸시 알림
```

**완전 자율 구현**

---

## 📊 코드 리팩토링

모든 기능 추가 후 코드를 개선하세요.

### 리팩토링 체크리스트

**[ ] 1. 코드 중복 제거**
```
중복 찾기:
□ 같은 로직이 여러 곳에?
□ 비슷한 함수들?
□ 공통 패턴?

해결:
- 유틸리티 함수로 추출
- 공통 로직을 기반 클래스로
- 헬퍼 클래스 생성
```

**[ ] 2. 네이밍 개선**
```
개선이 필요한 이름:
- data → weatherData
- temp → temperature
- fn → functionName
- res → response

명확하지 않은 이름 찾아서 개선
```

**[ ] 3. 에러 처리 강화**
```
확인할 점:
□ 모든 async 함수에 try-catch?
□ 의미 있는 에러 메시지?
□ 에러 로깅?
□ 복구 가능한 에러는 복구?
```

**[ ] 4. 타입 안전성 강화**
```
□ any 타입 제거
□ 옵셔널 체이닝 (?.) 활용
□ null 체크 추가
□ 타입 가드 사용
```

**[ ] 5. 성능 최적화**
```
□ 불필요한 API 호출 제거
□ 캐시 효율 개선
□ 메모리 누수 확인
□ 병렬 처리 활용
```

**[ ] 6. 주석 추가/개선**
```
□ 모든 public 메서드에 JSDoc
□ 복잡한 로직에 설명
□ TODO 주석 처리
□ 불필요한 주석 제거
```

---

## 📝 최종 테스트

### 통합 테스트 시나리오

**[ ] 전체 기능 테스트:**
```typescript
async function finalTest() {
  console.log("=== 최종 통합 테스트 ===\n");
  
  const dashboard = new WeatherDashboard(API_KEY);
  
  // 1. 기본 기능
  console.log("1️⃣ 기본 날씨 조회");
  await dashboard.getWeather("Seoul");
  
  // 2. 캐싱
  console.log("\n2️⃣ 캐시 테스트");
  const start = Date.now();
  await dashboard.getWeather("Seoul");
  console.log(`캐시 히트: ${Date.now() - start}ms`);
  
  // 3. 여러 도시
  console.log("\n3️⃣ 다중 도시");
  await dashboard.getMultipleWeather([
    "Seoul", "Tokyo", "New York", "London", "Paris"
  ]);
  
  // 4. 즐겨찾기
  console.log("\n4️⃣ 즐겨찾기");
  dashboard.addFavorite("Seoul");
  dashboard.addFavorite("Tokyo");
  
  // 5. Level 1 기능들
  console.log("\n5️⃣ 추가 기능");
  // 구현한 기능 테스트
  
  // 6. 에러 처리
  console.log("\n6️⃣ 에러 처리");
  await dashboard.getWeather("InvalidCity");
  
  // 7. 대시보드 출력
  console.log("\n7️⃣ 전체 대시보드");
  dashboard.printDashboard();
  
  // 8. 통계
  console.log("\n8️⃣ 통계");
  dashboard.printStatistics();
  
  console.log("\n✅ 모든 테스트 완료!");
}

finalTest().catch(console.error);
```

### 성능 테스트

**[ ] 성능 벤치마크:**
```typescript
async function performanceTest() {
  console.log("=== 성능 테스트 ===\n");
  
  const dashboard = new WeatherDashboard(API_KEY);
  
  // 1. API 호출 속도
  console.log("1. API 호출 속도");
  const apiStart = Date.now();
  await dashboard.getWeather("Seoul", false); // 캐시 미사용
  console.log(`소요 시간: ${Date.now() - apiStart}ms`);
  
  // 2. 캐시 조회 속도
  console.log("\n2. 캐시 조회 속도");
  const cacheStart = Date.now();
  await dashboard.getWeather("Seoul", true); // 캐시 사용
  console.log(`소요 시간: ${Date.now() - cacheStart}ms`);
  
  // 3. 병렬 처리 속도
  console.log("\n3. 병렬 처리 (5개 도시)");
  const parallelStart = Date.now();
  await dashboard.getMultipleWeather([
    "Seoul", "Tokyo", "New York", "London", "Paris"
  ]);
  console.log(`소요 시간: ${Date.now() - parallelStart}ms`);
  
  // 4. 캐시 히트율
  console.log("\n4. 캐시 통계");
  const cacheStats = dashboard.getCacheStats();
  console.log(cacheStats);
}
```

---

## 📚 포트폴리오 준비

### README 완성

**[ ] 프로젝트 README 작성:**
```markdown
# 🌤️ Weather Dashboard

TypeScript로 구현한 실시간 날씨 대시보드 애플리케이션

## ✨ 주요 기능

### 기본 기능
- ✅ 실시간 날씨 조회 (OpenWeather API)
- ✅ 여러 도시 동시 조회
- ✅ 스마트 캐싱 시스템 (5분 TTL)
- ✅ 즐겨찾기 관리
- ✅ 검색 히스토리

### 고급 기능
- ✅ [구현한 기능 나열]
- ✅ [구현한 기능 나열]

## 🛠️ 기술 스택

- **Language**: TypeScript 5.x
- **Runtime**: Node.js
- **API**: OpenWeather API
- **Architecture**: 
  - 레이어드 아키텍처
  - 의존성 주입
  - 캐시 전략 패턴

## 📦 설치 및 실행

```bash
# 설치
npm install

# API 키 설정
cp .env.example .env
# .env 파일에 API 키 입력

# 실행
npm run dev
```

## 🎯 핵심 구현

### 1. 캐싱 시스템

```typescript
class CacheManager<T> {
  // TTL 기반 캐싱
  // 만료 자동 관리
  // 히트율 측정
}
```

### 2. API 통합

```typescript
class WeatherApiService {
  // 재시도 로직
  // 에러 복구
  // 타임아웃 처리
}
```

## 📊 성능

- API 응답 시간: ~500ms
- 캐시 조회 시간: <1ms
- 캐시 히트율: ~85%

## 🧪 테스트

```bash
npm test
```

## 📸 스크린샷

```
=== 날씨 대시보드 ===

📍 서울
   ☀️ 맑음 (Clear sky)
   온도: 5°C (체감: 2°C)
   ...
```

## 🚀 배운 점

### 기술적 성장
- 실시간 외부 API 통합 및 에러 처리
- 효율적인 캐싱 전략 설계 및 구현
- TypeScript 제네릭과 고급 타입 활용
- 비동기 프로그래밍 패턴 심화
- 레이어드 아키텍처 설계

### 문제 해결 경험
- **문제**: API 호출 제한 초과
  - **해결**: TTL 기반 캐싱으로 90% 호출 감소
  
- **문제**: 네트워크 불안정 시 에러
  - **해결**: 재시도 로직 및 캐시 폴백 구현
  
- **문제**: 여러 도시 조회 시 느린 속도
  - **해결**: Promise.all로 병렬 처리

### 설계 결정
- **캐싱**: Map vs localStorage → Map 선택 (성능 우선)
- **API**: 단일 vs 다중 → 인터페이스로 확장 가능하게
- **에러**: throw vs return null → return null (사용자 경험)

## 🔮 향후 계획

- [ ] GraphQL API 지원
- [ ] 웹 UI 구현
- [ ] 모바일 앱 변환
- [ ] 머신러닝 예측

## 👤 작성자

[Your Name]
- Portfolio: [link]
- GitHub: [link]
- Email: [email]

## 📄 라이선스

MIT License

---

**프로젝트 기간**: 2024.01.01 - 2024.01.15
**개발 시간**: 약 12시간
**코드 라인**: ~1,500줄
-
