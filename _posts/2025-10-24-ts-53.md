---
title: "[TS 실습/초급] 날씨 정보 앱 - 2가지 버전"
date: 2025-10-24 17:30:00 +0900
categories: [웹 개발, 타입스크립트]
tags: [웹개발, 타입스크립트, TS, 날씨앱]
pin: true
math: true
mermaid: true
---

# 날씨 정보 앱

날씨 정보 앱'은 비동기 데이터 처리, API 연동, 그리고 받아온 데이터의 타입을 정의하는 방법을 익힐 수 있어 TypeScript 초급자에게 훌륭한 두 번째 프로젝트입니다.
 
이번에도 'React를 사용하지 않은 순수 TypeScript 버전'과 'React를 사용한 버전'으로 나누어, 외부 날씨 API를 호출하는 코드를 작성해 보겠습니다.

**⚠️ API 키 발급 안내**

아래 두 예제 모두 OpenWeatherMap에서 발급하는 무료 API 키가 필요합니다. 회원가입 후 API keys 탭에서 키를 발급받아 코드의 YOUR_API_KEY 부분을 교체해주세요.

## 1. React를 사용하지 않은 경우 (Vanilla TypeScript + HTML)

DOM을 직접 제어하여 API 요청 상태(로딩, 성공, 실패)에 따라 화면을 동적으로 변경하는 방법을 배울 수 있습니다.

### 핵심 아이디어:

**비동기 통신:** fetch와 async/await를 사용하여 외부 API로부터 날씨 데이터를 비동기적으로 가져옵니다.

**타입 정의:** API 응답 데이터의 구조에 맞춰 interface를 선언하여 타입 안정성을 확보합니다.

**상태에 따른 DOM 업데이트:** 로딩 중일 때, 데이터를 성공적으로 받았을 때, 에러가 발생했을 때 각각에 맞춰 HTML 요소를 직접 업데이트합니다.

## 1-1. index.html (HTML 구조)
```
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla TS Weather App</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f0f4f8; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { width: 90%; max-width: 400px; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        h1 { color: #333; }
        form { display: flex; gap: 10px; margin-bottom: 20px; }
        input { flex-grow: 1; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; }
        button { padding: 12px 18px; border: none; background-color: #4a90e2; color: white; border-radius: 8px; cursor: pointer; transition: background-color 0.3s; }
        button:hover { background-color: #357abd; }
        #loading { display: none; color: #555; }
        #error { display: none; color: #d9534f; }
        #weather-result { display: none; }
        #weather-result h2 { margin: 10px 0 5px; color: #4a4a4a; }
        #weather-result p { margin: 5px 0; color: #666; font-size: 1.2rem; }
    </style>
</head>
<body>
    <div class="container">
        <h1>날씨 정보 앱</h1>
        <form id="weather-form">
            <input type="text" id="city-input" placeholder="도시 이름을 입력하세요 (예: Seoul)" required>
            <button type="submit">검색</button>
        </form>
        <div id="loading">불러오는 중...</div>
        <div id="error"></div>
        <div id="weather-result">
            <h2 id="city-name"></h2>
            <p id="temperature"></p>
            <p id="description"></p>
        </div>
    </div>
    <script src="weather.js"></script>
</body>
</html>
```

## 1-2. weather.ts (TypeScript 로직)
```typescript
// OpenWeatherMap API 응답 데이터 구조에 대한 인터페이스
interface WeatherData {
  name: string;
  main: {
    temp: number;
  };
  weather: {
    description: string;
    icon: string;
  }[];
}

const API_KEY = 'YOUR_API_KEY'; // 여기에 발급받은 API 키를 입력하세요.
const form = document.getElementById('weather-form') as HTMLFormElement;
const cityInput = document.getElementById('city-input') as HTMLInputElement;
const loadingDiv = document.getElementById('loading') as HTMLDivElement;
const errorDiv = document.getElementById('error') as HTMLDivElement;
const weatherResultDiv = document.getElementById('weather-result') as HTMLDivElement;
const cityNameEl = document.getElementById('city-name') as HTMLHeadingElement;
const temperatureEl = document.getElementById('temperature') as HTMLParagraphElement;
const descriptionEl = document.getElementById('description') as HTMLParagraphElement;

form.addEventListener('submit', async (e: Event) => {
  e.preventDefault();
  const city = cityInput.value.trim();
  if (!city) return;

  // UI 상태 초기화
  weatherResultDiv.style.display = 'none';
  errorDiv.style.display = 'none';
  loadingDiv.style.display = 'block';

  try {
    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=kr`);

    if (!response.ok) {
      throw new Error('도시를 찾을 수 없습니다.');
    }

    const data: WeatherData = await response.json();
    displayWeather(data);

  } catch (err) {
    displayError(err instanceof Error ? err.message : '알 수 없는 오류가 발생했습니다.');
  } finally {
    loadingDiv.style.display = 'none';
  }
});

function displayWeather(data: WeatherData) {
  cityNameEl.textContent = data.name;
  temperatureEl.textContent = `온도: ${data.main.temp.toFixed(1)}°C`;
  descriptionEl.textContent = data.weather[0].description;
  weatherResultDiv.style.display = 'block';
}

function displayError(message: string) {
  errorDiv.textContent = message;
  errorDiv.style.display = 'block';
}
```

----

## 2. React와 TypeScript를 사용한 경우

useState 훅을 사용하여 API 요청과 관련된 상태(데이터, 로딩, 에러)를 관리합니다. 상태가 변경되면 React가 자동으로 UI를 다시 렌더링해주므로 DOM을 직접 제어할 필요가 없습니다.

### 핵심 아이디어:

**상태 관리:** weatherData, loading, error라는 세 가지 상태를 useState로 관리합니다.

**선언형 UI:** JSX 내에서 삼항 연산자나 논리 연산자를 사용하여 각 상태에 따라 어떤 UI를 보여줄지 '선언'합니다.

**이벤트 핸들링:** 폼 제출 시 실행될 비동기 함수 안에서 API를 호출하고, 결과에 따라 상태를 업데이트(setWeatherData, setLoading 등)합니다.

### WeatherApp.tsx (React 컴포넌트)
```tsx
import React, { useState, FormEvent } from 'react';

// API 응답 데이터의 타입을 정의합니다.
interface WeatherData {
  name: string;
  main: {
    temp: number;
  };
  weather: {
    description: string;
    icon: string;
  }[];
}

const WeatherApp: React.FC = () => {
  const API_KEY = 'YOUR_API_KEY'; // 여기에 발급받은 API 키를 입력하세요.
  
  const [city, setCity] = useState('');
  const [weatherData, setWeatherData] = useState<WeatherData | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handleSearch = async (e: FormEvent) => {
    e.preventDefault();
    if (city.trim() === '') return;

    setLoading(true);
    setError(null);
    setWeatherData(null);

    try {
      const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=kr`);
      
      if (!response.ok) {
        throw new Error('도시를 찾을 수 없습니다. 영문으로 입력해보세요.');
      }
      
      const data: WeatherData = await response.json();
      setWeatherData(data);

    } catch (err) {
      setError(err instanceof Error ? err.message : '알 수 없는 오류가 발생했습니다.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div style={{ width: '90%', maxWidth: '400px', margin: 'auto', background: 'white', padding: '25px', borderRadius: '12px', boxShadow: '0 4px 15px rgba(0,0,0,0.1)', textAlign: 'center', fontFamily: 'sans-serif', color: '#333' }}>
      <h1>날씨 정보 앱 (React)</h1>
      <form onSubmit={handleSearch} style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
        <input
          type="text"
          value={city}
          onChange={(e) => setCity(e.target.value)}
          placeholder="도시 이름을 입력하세요"
          style={{ flexGrow: 1, padding: '12px', border: '1px solid #ddd', borderRadius: '8px', fontSize: '16px' }}
        />
        <button type="submit" style={{ padding: '12px 18px', border: 'none', backgroundColor: '#4a90e2', color: 'white', borderRadius: '8px', cursor: 'pointer' }}>
          검색
        </button>
      </form>
      
      {loading && <p>불러오는 중...</p>}
      
      {error && <p style={{ color: '#d9534f' }}>{error}</p>}
      
      {weatherData && (
        <div>
          <h2 style={{ margin: '10px 0 5px', color: '#4a4a4a' }}>{weatherData.name}</h2>
          <p style={{ margin: '5px 0', color: '#666', fontSize: '1.2rem' }}>
            온도: {weatherData.main.temp.toFixed(1)}°C
          </p>
          <p style={{ margin: '5px 0', color: '#666', fontSize: '1.2rem' }}>
            {weatherData.weather[0].description}
          </p>
        </div>
      )}
    </div>
  );
};

export default WeatherApp;
```

## 두 방식의 차이점 요약

**UI 업데이트 방식:** Vanilla TS는 document.getElementById로 요소를 찾아 .textContent나 .style.display를 직접 변경하는 명령형 방식입니다. 반면, React는 useState로 상태를 변경하면 UI가 자동으로 다시 그려지는 선언형 방식입니다.

**상태 관리의 복잡성:** 이 예제처럼 간단한 앱에서는 큰 차이가 없지만, 앱이 복잡해질수록 Vanilla 방식은 UI 상태를 일관성 있게 관리하기 어려워집니다. React는 상태가 UI를 결정하는 구조이므로 복잡한 상호작용도 체계적으로 관리할 수 있습니다.

두 가지 버전을 모두 실습해보시면 TypeScript의 타입 시스템이 어떻게 비동기 데이터의 안정성을 높여주고, React와 같은 프레임워크가 UI 개발을 얼마나 편리하게 만들어주는지 명확하게 이해하실 수 있을 겁니다.
