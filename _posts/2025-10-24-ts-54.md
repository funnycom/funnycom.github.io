---
title: "[TS] ì‹¤ì „ í”„ë¡œì íŠ¸ - 2 "
date: 2025-10-23 20:35:00 +0900
categories: [ì›¹ ê°œë°œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸]
tags: [ì›¹ê°œë°œ, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, TS]
pin: true
math: true
mermaid: true
---

## ğŸ¯ Step 6: Service ê³„ì¸µ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)

### 6-1. src/services/user-service.ts
```typescript
import { v4 as uuidv4 } from 'uuid';
import { UserRepository } from '@repositories/user-repository';
import { User, CreateUserDto, UpdateUserDto, UserProfile } from '@models/user';
import { Log, LogAsync } from '@decorators/logging';
import { Validate, Required, MinLength, Email } from '@decorators/validation';
import { Cache } from '@decorators/cache';
import { ID } from '@types/common';
import { ApiResponse } from '@types/api';

// ìœ íš¨ì„± ê²€ì‚¬ìš© DTO í´ë˜ìŠ¤
export class CreateUserValidationDto {
  @Required()
  @MinLength(3)
  username!: string;

  @Required()
  @Email()
  email!: string;

  @Required()
  @MinLength(8)
  password!: string;

  role!: 'admin' | 'user' | 'guest';
  isActive!: boolean;
}

export class UserService {
  private repository: UserRepository;

  constructor() {
    this.repository = new UserRepository();
  }

  @LogAsync('USER-SERVICE')
  @Validate
  async createUser(dto: CreateUserDto): Promise<ApiResponse<UserProfile>> {
    try {
      // DTO ìœ íš¨ì„± ê²€ì‚¬
      const validationDto = Object.assign(new CreateUserValidationDto(), dto);
      
      // ì¤‘ë³µ ì²´í¬
      const existingUser = await this.repository.findByUsername(dto.username);
      if (existingUser) {
        return {
          success: false,
          error: 'Username already exists',
          code: 'DUPLICATE_USERNAME',
        };
      }

      const existingEmail = await this.repository.findByEmail(dto.email);
      if (existingEmail) {
        return {
          success: false,
          error: 'Email already exists',
          code: 'DUPLICATE_EMAIL',
        };
      }

      // ì‚¬ìš©ì ìƒì„±
      const user: User = {
        id: uuidv4(),
        ...dto,
        createdAt: new Date(),
        updatedAt: new Date(),
      };

      await this.repository.create(user);

      // password ì œì™¸í•˜ê³  ë°˜í™˜
      const { password, ...profile } = user;

      return {
        success: true,
        data: profile,
        message: 'User created successfully',
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('USER-SERVICE')
  @Cache({ ttl: 5000 }) // 5ì´ˆ ìºì‹±
  async getUserById(id: ID): Promise<ApiResponse<UserProfile>> {
    try {
      const user = await this.repository.findById(id);

      if (!user) {
        return {
          success: false,
          error: 'User not found',
          code: 'USER_NOT_FOUND',
        };
      }

      const { password, ...profile } = user;

      return {
        success: true,
        data: profile,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('USER-SERVICE')
  async getAllUsers(): Promise<ApiResponse<UserProfile[]>> {
    try {
      const users = await this.repository.findAll();
      const profiles = users.map(({ password, ...profile }) => profile);

      return {
        success: true,
        data: profiles,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('USER-SERVICE')
  async updateUser(id: ID, dto: UpdateUserDto): Promise<ApiResponse<UserProfile>> {
    try {
      const updated = await this.repository.update(id, {
        ...dto,
        updatedAt: new Date(),
      });

      if (!updated) {
        return {
          success: false,
          error: 'User not found',
          code: 'USER_NOT_FOUND',
        };
      }

      const { password, ...profile } = updated;

      return {
        success: true,
        data: profile,
        message: 'User updated successfully',
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('USER-SERVICE')
  async deleteUser(id: ID): Promise<ApiResponse<void>> {
    try {
      const deleted = await this.repository.delete(id);

      if (!deleted) {
        return {
          success: false,
          error: 'User not found',
          code: 'USER_NOT_FOUND',
        };
      }

      return {
        success: true,
        data: undefined,
        message: 'User deleted successfully',
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('USER-SERVICE')
  async getActiveUsers(): Promise<ApiResponse<UserProfile[]>> {
    try {
      const users = await this.repository.findActiveUsers();
      const profiles = users.map(({ password, ...profile }) => profile);

      return {
        success: true,
        data: profiles,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }
}
```

### 6-2. src/services/task-service.ts
```typescript
import { v4 as uuidv4 } from 'uuid';
import { TaskRepository } from '@repositories/task-repository';
import { Task, CreateTaskDto, UpdateTaskDto, TaskStatus, TaskPriority } from '@models/task';
import { Log, LogAsync } from '@decorators/logging';
import { Validate, Required, MinLength } from '@decorators/validation';
import { Cache } from '@decorators/cache';
import { ID } from '@types/common';
import { ApiResponse } from '@types/api';

// ìœ íš¨ì„± ê²€ì‚¬ìš© DTO
export class CreateTaskValidationDto {
  @Required()
  @MinLength(3)
  title!: string;

  description?: string;

  @Required()
  status!: TaskStatus;

  @Required()
  priority!: TaskPriority;

  assigneeId?: ID;
  dueDate?: Date;
  tags!: string[];
}

export class TaskService {
  private repository: TaskRepository;

  constructor() {
    this.repository = new TaskRepository();
  }

  @LogAsync('TASK-SERVICE')
  @Validate
  async createTask(dto: CreateTaskDto): Promise<ApiResponse<Task>> {
    try {
      // DTO ìœ íš¨ì„± ê²€ì‚¬
      const validationDto = Object.assign(new CreateTaskValidationDto(), dto);

      const task: Task = {
        id: uuidv4(),
        ...dto,
        createdAt: new Date(),
        updatedAt: new Date(),
      };

      await this.repository.create(task);

      return {
        success: true,
        data: task,
        message: 'Task created successfully',
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  @Cache({ ttl: 3000 }) // 3ì´ˆ ìºì‹±
  async getTaskById(id: ID): Promise<ApiResponse<Task>> {
    try {
      const task = await this.repository.findById(id);

      if (!task) {
        return {
          success: false,
          error: 'Task not found',
          code: 'TASK_NOT_FOUND',
        };
      }

      return {
        success: true,
        data: task,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async getAllTasks(): Promise<ApiResponse<Task[]>> {
    try {
      const tasks = await this.repository.findAll();

      return {
        success: true,
        data: tasks,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async updateTask(id: ID, dto: UpdateTaskDto): Promise<ApiResponse<Task>> {
    try {
      // ì™„ë£Œ ìƒíƒœë¡œ ë³€ê²½ ì‹œ completedAt ì„¤ì •
      if (dto.status === 'done') {
        dto.completedAt = new Date();
      }
const updated = await this.repository.update(id, {
        ...dto,
        updatedAt: new Date(),
      });

      if (!updated) {
        return {
          success: false,
          error: 'Task not found',
          code: 'TASK_NOT_FOUND',
        };
      }

      return {
        success: true,
        data: updated,
        message: 'Task updated successfully',
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async deleteTask(id: ID): Promise<ApiResponse<void>> {
    try {
      const deleted = await this.repository.delete(id);

      if (!deleted) {
        return {
          success: false,
          error: 'Task not found',
          code: 'TASK_NOT_FOUND',
        };
      }

      return {
        success: true,
        data: undefined,
        message: 'Task deleted successfully',
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  @Cache({ ttl: 5000 })
  async getTasksByStatus(status: TaskStatus): Promise<ApiResponse<Task[]>> {
    try {
      const tasks = await this.repository.findByStatus(status);

      return {
        success: true,
        data: tasks,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async getTasksByAssignee(assigneeId: ID): Promise<ApiResponse<Task[]>> {
    try {
      const tasks = await this.repository.findByAssignee(assigneeId);

      return {
        success: true,
        data: tasks,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async getOverdueTasks(): Promise<ApiResponse<Task[]>> {
    try {
      const tasks = await this.repository.findOverdue();

      return {
        success: true,
        data: tasks,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async getTasksByTags(tags: string[]): Promise<ApiResponse<Task[]>> {
    try {
      const tasks = await this.repository.findByTags(tags);

      return {
        success: true,
        data: tasks,
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  @LogAsync('TASK-SERVICE')
  async getTaskStatistics(): Promise
    ApiResponse<{
      total: number;
      byStatus: Record<TaskStatus, number>;
      byPriority: Record<TaskPriority, number>;
      overdue: number;
    }>
  > {
    try {
      const tasks = await this.repository.findAll();
      const overdueTasks = await this.repository.findOverdue();

      const byStatus: Record<TaskStatus, number> = {
        todo: 0,
        'in-progress': 0,
        done: 0,
        cancelled: 0,
      };

      const byPriority: Record<TaskPriority, number> = {
        low: 0,
        medium: 0,
        high: 0,
        urgent: 0,
      };

      tasks.forEach((task) => {
        byStatus[task.status]++;
        byPriority[task.priority]++;
      });

      return {
        success: true,
        data: {
          total: tasks.length,
          byStatus,
          byPriority,
          overdue: overdueTasks.length,
        },
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }
}
```

### 6-3 src/services/index.ts
```typescript
export * from './user-service';
export * from './task-service';
```

## ğŸš€ Step 7: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

### 7-1. src/utils/validators.ts
```typescript
export function isValidEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}

export function isValidPassword(password: string): boolean {
  // ìµœì†Œ 8ì, ëŒ€ë¬¸ì 1ê°œ, ì†Œë¬¸ì 1ê°œ, ìˆ«ì 1ê°œ
  return (
    password.length >= 8 &&
    /[A-Z]/.test(password) &&
    /[a-z]/.test(password) &&
    /[0-9]/.test(password)
  );
}

export function isValidUsername(username: string): boolean {
  // 3-20ì, ì˜ë¬¸ì, ìˆ«ì, ì–¸ë”ìŠ¤ì½”ì–´ë§Œ
  return /^[a-zA-Z0-9_]{3,20}$/.test(username);
}
```

### 7-2. src/utils/formatters.ts
```typescript
export function formatDate(date: Date): string {
  return date.toISOString().split('T')[0];
}

export function formatDateTime(date: Date): string {
  return date.toISOString().replace('T', ' ').split('.')[0];
}

export function formatTaskSummary(task: { title: string; status: string; priority: string }): string {
  return `[${task.status.toUpperCase()}] ${task.title} (${task.priority})`;
}
```

### 7-3. src/utils/index.ts
```typescript
export * from './validators';
export * from './formatters';
```

## ğŸ“± Step 8: ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜

### 8-1. src/index.ts
```typescript
import 'reflect-metadata';
import { UserService } from '@services/user-service';
import { TaskService } from '@services/task-service';
import { CreateUserDto } from '@models/user';
import { CreateTaskDto } from '@models/task';

async function main(): Promise<void> {
  console.log('=== Task Management System ===\n');

  const userService = new UserService();
  const taskService = new TaskService();

  // ==================== ì‚¬ìš©ì ê´€ë¦¬ ====================
  console.log('\n--- User Management ---\n');

  // 1. ì‚¬ìš©ì ìƒì„±
  console.log('1. Creating users...');
  const user1Dto: CreateUserDto = {
    username: 'admin',
    email: 'admin@example.com',
    password: 'Admin123!',
    role: 'admin',
    isActive: true,
  };

  const user2Dto: CreateUserDto = {
    username: 'john_doe',
    email: 'john@example.com',
    password: 'John123!',
    role: 'user',
    isActive: true,
  };

  const user1Result = await userService.createUser(user1Dto);
  console.log('User 1:', user1Result);

  const user2Result = await userService.createUser(user2Dto);
  console.log('User 2:', user2Result);

  // 2. ì¤‘ë³µ ì‚¬ìš©ì ìƒì„± ì‹œë„ (ì—ëŸ¬ í…ŒìŠ¤íŠ¸)
  console.log('\n2. Testing duplicate user creation...');
  const duplicateResult = await userService.createUser(user1Dto);
  console.log('Duplicate attempt:', duplicateResult);

  // 3. ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ
  console.log('\n3. Fetching all users...');
  const allUsers = await userService.getAllUsers();
  console.log('All users:', JSON.stringify(allUsers, null, 2));

  // 4. íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ (ìºì‹± í…ŒìŠ¤íŠ¸)
  if (user1Result.success) {
    console.log('\n4. Fetching user by ID (first call - cache miss)...');
    const getUserResult1 = await userService.getUserById(user1Result.data.id);
    console.log('User:', getUserResult1);

    console.log('\n5. Fetching same user again (cache hit)...');
    const getUserResult2 = await userService.getUserById(user1Result.data.id);
    console.log('User (cached):', getUserResult2);
  }

  // ==================== ì‘ì—… ê´€ë¦¬ ====================
  console.log('\n\n--- Task Management ---\n');

  let userId1: string | undefined;
  let userId2: string | undefined;

  if (user1Result.success) userId1 = user1Result.data.id.toString();
  if (user2Result.success) userId2 = user2Result.data.id.toString();

  // 1. ì‘ì—… ìƒì„±
  console.log('1. Creating tasks...');

  const task1Dto: CreateTaskDto = {
    title: 'Implement login feature',
    description: 'Create user authentication system',
    status: 'in-progress',
    priority: 'high',
    assigneeId: userId1,
    dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7ì¼ í›„
    tags: ['feature', 'backend', 'authentication'],
  };

  const task2Dto: CreateTaskDto = {
    title: 'Write documentation',
    description: 'Update API documentation',
    status: 'todo',
    priority: 'medium',
    assigneeId: userId2,
    dueDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000), // 3ì¼ í›„
    tags: ['documentation'],
  };

  const task3Dto: CreateTaskDto = {
    title: 'Fix critical bug',
    description: 'Database connection timeout',
    status: 'todo',
    priority: 'urgent',
    assigneeId: userId1,
    dueDate: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000), // 1ì¼ ì „ (overdue)
    tags: ['bug', 'critical'],
  };

  const task1Result = await taskService.createTask(task1Dto);
  console.log('Task 1:', task1Result);

  const task2Result = await taskService.createTask(task2Dto);
  console.log('Task 2:', task2Result);

  const task3Result = await taskService.createTask(task3Dto);
  console.log('Task 3:', task3Result);

  // 2. ëª¨ë“  ì‘ì—… ì¡°íšŒ
  console.log('\n2. Fetching all tasks...');
  const allTasks = await taskService.getAllTasks();
  console.log(`Total tasks: ${allTasks.success ? allTasks.data.length : 0}`);

  // 3. ìƒíƒœë³„ ì‘ì—… ì¡°íšŒ (ìºì‹± í…ŒìŠ¤íŠ¸)
  console.log('\n3. Fetching tasks by status (TODO)...');
  const todoTasks1 = await taskService.getTasksByStatus('todo');
  console.log('TODO tasks (first call):', todoTasks1);

  console.log('\n4. Fetching TODO tasks again (cached)...');
  const todoTasks2 = await taskService.getTasksByStatus('todo');
  console.log('TODO tasks (cached):', todoTasks2);

  // 4. ë‹´ë‹¹ìë³„ ì‘ì—… ì¡°íšŒ
  if (userId1) {
    console.log('\n5. Fetching tasks by assignee...');
    const assigneeTasks = await taskService.getTasksByAssignee(userId1);
    console.log(`Tasks for user ${userId1}:`, assigneeTasks);
  }

  // 5. ê¸°í•œ ì´ˆê³¼ ì‘ì—… ì¡°íšŒ
  console.log('\n6. Fetching overdue tasks...');
  const overdueTasks = await taskService.getOverdueTasks();
  console.log('Overdue tasks:', overdueTasks);

  // 6. íƒœê·¸ë³„ ì‘ì—… ì¡°íšŒ
  console.log('\n7. Fetching tasks by tags...');
  const bugTasks = await taskService.getTasksByTags(['bug', 'critical']);
  console.log('Tasks with "bug" or "critical" tags:', bugTasks);

  // 7. ì‘ì—… í†µê³„
  console.log('\n8. Fetching task statistics...');
  const stats = await taskService.getTaskStatistics();
  console.log('Statistics:', JSON.stringify(stats, null, 2));

  // 8. ì‘ì—… ì—…ë°ì´íŠ¸
  if (task1Result.success) {
    console.log('\n9. Updating task status...');
    const updateResult = await taskService.updateTask(task1Result.data.id, {
      status: 'done',
    });
    console.log('Updated task:', updateResult);
  }

  // 9. ìµœì¢… í†µê³„
  console.log('\n10. Final statistics...');
  const finalStats = await taskService.getTaskStatistics();
  console.log('Final statistics:', JSON.stringify(finalStats, null, 2));

  // ==================== ìœ íš¨ì„± ê²€ì‚¬ í…ŒìŠ¤íŠ¸ ====================
  console.log('\n\n--- Validation Tests ---\n');

  // 1. ì˜ëª»ëœ ì´ë©”ì¼
  console.log('1. Testing invalid email...');
  const invalidEmailUser: CreateUserDto = {
    username: 'testuser',
    email: 'invalid-email',
    password: 'Test123!',
    role: 'user',
    isActive: true,
  };
  const invalidEmailResult = await userService.createUser(invalidEmailUser);
  console.log('Invalid email result:', invalidEmailResult);

  // 2. ì§§ì€ ë¹„ë°€ë²ˆí˜¸
  console.log('\n2. Testing short password...');
  const shortPasswordUser: CreateUserDto = {
    username: 'testuser2',
    email: 'test2@example.com',
    password: 'short',
    role: 'user',
    isActive: true,
  };
  const shortPasswordResult = await userService.createUser(shortPasswordUser);
  console.log('Short password result:', shortPasswordResult);

  // 3. ì§§ì€ ì‘ì—… ì œëª©
  console.log('\n3. Testing short task title...');
  const shortTitleTask: CreateTaskDto = {
    title: 'AB',
    status: 'todo',
    priority: 'low',
    tags: [],
  };
  const shortTitleResult = await taskService.createTask(shortTitleTask);
  console.log('Short title result:', shortTitleResult);

  console.log('\n=== Program completed ===');
}

// ì‹¤í–‰
main().catch((error) => {
  console.error('Fatal error:', error);
  process.exit(1);
});
```

## ğŸ§ª Step 9: í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±

### 9-1. tests/user-service.test.ts (ì˜ˆì œ)
```typescript
import 'reflect-metadata';
import { UserService } from '@services/user-service';
import { CreateUserDto } from '@models/user';

describe('UserService', () => {
  let userService: UserService;

  beforeEach(() => {
    userService = new UserService();
  });

  test('should create user successfully', async () => {
    const dto: CreateUserDto = {
      username: 'testuser',
      email: 'test@example.com',
      password: 'Test123!',
      role: 'user',
      isActive: true,
    };

    const result = await userService.createUser(dto);

    expect(result.success).toBe(true);
    if (result.success) {
      expect(result.data.username).toBe('testuser');
      expect(result.data.email).toBe('test@example.com');
      expect(result.data).not.toHaveProperty('password'); // password ì œì™¸ í™•ì¸
    }
  });

  test('should reject invalid email', async () => {
    const dto: CreateUserDto = {
      username: 'testuser',
      email: 'invalid-email',
      password: 'Test123!',
      role: 'user',
      isActive: true,
    };

    const result = await userService.createUser(dto);

    expect(result.success).toBe(false);
  });

  test('should reject duplicate username', async () => {
    const dto: CreateUserDto = {
      username: 'duplicate',
      email: 'dup1@example.com',
      password: 'Test123!',
      role: 'user',
      isActive: true,
    };

    await userService.createUser(dto);

    const dto2: CreateUserDto = {
      username: 'duplicate',
      email: 'dup2@example.com',
      password: 'Test123!',
      role: 'user',
      isActive: true,
    };

    const result = await userService.createUser(dto2);

    expect(result.success).toBe(false);
    if (!result.success) {
      expect(result.code).toBe('DUPLICATE_USERNAME');
    }
  });
});
```

## ğŸ® Step 10: ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸

### 10-1. í”„ë¡œì íŠ¸ ì‹¤í–‰
```bash
# ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰
npm run dev

# ë¹Œë“œ í›„ ì‹¤í–‰
npm run build
npm start
```

### 10-2. ì˜ˆìƒ ì¶œë ¥
```
=== Task Management System ===

--- User Management ---

1. Creating users...
[USER-SERVICE] createUser called with: [{"username":"admin","email":"admin@example.com",...}]
[USER-SERVICE] createUser completed in 45.23ms
User 1: {
  success: true,
  data: {
    id: '123e4567-e89b-12d3-a456-426614174000',
    username: 'admin',
    email: 'admin@example.com',
    role: 'admin',
    isActive: true,
    createdAt: '2024-01-15T10:30:00.000Z',
    updatedAt: '2024-01-15T10:30:00.000Z'
  },
  message: 'User created successfully'
}

[USER-SERVICE] createUser called with: [{"username":"john_doe",...}]
[USER-SERVICE] createUser completed in 38.12ms
User 2: { success: true, data: {...}, message: 'User created successfully' }

2. Testing duplicate user creation...
[USER-SERVICE] createUser called with: [{"username":"admin",...}]
[USER-SERVICE] createUser completed in 15.67ms
Duplicate attempt: {
  success: false,
  error: 'Username already exists',
  code: 'DUPLICATE_USERNAME'
}

4. Fetching user by ID (first call - cache miss)...
[CACHE] Miss for getUserById
[USER-SERVICE] getUserById called with: ["123e4567-e89b-12d3-a456-426614174000"]
[USER-SERVICE] getUserById completed in 12.34ms

5. Fetching same user again (cache hit)...
[CACHE] Hit for getUserById

--- Task Management ---

1. Creating tasks...
[TASK-SERVICE] createTask called with: [{"title":"Implement login feature",...}]
[TASK-SERVICE] createTask completed in 23.45ms

8. Fetching task statistics...
[TASK-SERVICE] getTaskStatistics called with: []
[TASK-SERVICE] getTaskStatistics completed in 34.56ms
Statistics: {
  success: true,
  data: {
    total: 3,
    byStatus: {
      todo: 2,
      'in-progress': 1,
      done: 0,
      cancelled: 0
    },
    byPriority: {
      low: 0,
      medium: 1,
      high: 1,
      urgent: 1
    },
    overdue: 1
  }
}

--- Validation Tests ---

1. Testing invalid email...
[USER-SERVICE] createUser called with: [{"username":"testuser","email":"invalid-email",...}]
Validation failed: email must be a valid email
[USER-SERVICE] createUser completed in 5.23ms
Invalid email result: {
  success: false,
  error: 'email must be a valid email'
}
```

=== Program completed ===

## ğŸ“Š Step 11: í”„ë¡œì íŠ¸ í™•ì¥ ì•„ì´ë””ì–´

ì´ì œ ê¸°ë³¸ í”„ë¡œì íŠ¸ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ë‹¤ìŒê³¼ ê°™ì´ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### í™•ì¥ ê¸°ëŠ¥ 1: í”„ë¡œì íŠ¸ ëª¨ë“ˆ
```typescript
// src/models/project.ts
export interface Project extends Timestamp {
  id: ID;
  name: string;
  description?: string;
  ownerId: ID;
  memberIds: ID[];
  status: 'active' | 'archived' | 'completed';
}

// ì‘ì—…ì„ í”„ë¡œì íŠ¸ì— ì—°ê²°
export interface Task extends Timestamp {
  // ... ê¸°ì¡´ í•„ë“œ
  projectId?: ID;  // ì¶”ê°€
}
```

### í™•ì¥ ê¸°ëŠ¥ 2: ëŒ“ê¸€ ì‹œìŠ¤í…œ
```typescript
// src/models/comment.ts
export interface Comment extends Timestamp {
  id: ID;
  taskId: ID;
  authorId: ID;
  content: string;
  edited: boolean;
}
```

### í™•ì¥ ê¸°ëŠ¥ 3: ì•Œë¦¼ ì‹œìŠ¤í…œ
```typescript
// src/services/notification-service.ts
export class NotificationService {
  @LogAsync('NOTIFICATION')
  async notifyTaskAssignment(taskId: ID, assigneeId: ID): Promise<void> {
    // ì‘ì—… í• ë‹¹ ì•Œë¦¼
  }

  @LogAsync('NOTIFICATION')
  async notifyDueDate(taskId: ID): Promise<void> {
    // ë§ˆê°ì¼ ì•Œë¦¼
  }
}
```

### í™•ì¥ ê¸°ëŠ¥ 4: í†µê³„ ë° ë¦¬í¬íŠ¸
```typescript
// src/services/analytics-service.ts
export class AnalyticsService {
  @Cache({ ttl: 60000 }) // 1ë¶„ ìºì‹±
  async getUserProductivity(userId: ID, period: 'day' | 'week' | 'month'): Promise<{
    completed: number;
    inProgress: number;
    averageCompletionTime: number;
  }> {
    // ì‚¬ìš©ì ìƒì‚°ì„± ë¶„ì„
  }

  @Cache({ ttl: 60000 })
  async getProjectProgress(projectId: ID): Promise<{
    totalTasks: number;
    completedTasks: number;
    progressPercentage: number;
    estimatedCompletion: Date;
  }> {
    // í”„ë¡œì íŠ¸ ì§„í–‰ë¥ 
  }
}
```

### í™•ì¥ ê¸°ëŠ¥ 5: RESTful API (Express í†µí•©)
```typescript
// src/api/routes/user.routes.ts
import express from 'express';
import { UserService } from '@services/user-service';

const router = express.Router();
const userService = new UserService();

router.post('/users', async (req, res) => {
  const result = await userService.createUser(req.body);
  if (result.success) {
    res.status(201).json(result);
  } else {
    res.status(400).json(result);
  }
});

router.get('/users/:id', async (req, res) => {
  const result = await userService.getUserById(req.params.id);
  if (result.success) {
    res.json(result);
  } else {
    res.status(404).json(result);
  }
});

export default router;
```

## ğŸ“ í•™ìŠµ ì •ë¦¬

Part 3ì—ì„œ ë°°ìš´ ë‚´ìš© ì ìš©

ì´ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ìŒì„ ì—°ìŠµí–ˆìŠµë‹ˆë‹¤:

### Chapter 13: ìœ í‹¸ë¦¬í‹° íƒ€ì…
```
âœ… Omit: CreateUserDto, UpdateUserDto
âœ… Partial: UpdateTaskDto
âœ… Pick: UserProfile (password ì œì™¸)
âœ… Record: byStatus, byPriority í†µê³„
âœ… ì»¤ìŠ¤í…€ ìœ í‹¸ë¦¬í‹°: Optional, DeepPartial, PickByType
```

### Chapter 14: ê³ ê¸‰ íƒ€ì… ê¸°ë²•
```
âœ… ì¡°ê±´ë¶€ íƒ€ì…: TaskByStatus
âœ… ë§¤í•‘ íƒ€ì…: ì»¤ìŠ¤í…€ ìœ í‹¸ë¦¬í‹° íƒ€ì…
âœ… í…œí”Œë¦¿ ë¦¬í„°ëŸ´ íƒ€ì…: API ì‘ë‹µ ë©”ì‹œì§€
âœ… íƒ€ì… ê°€ë“œ: ValidationError
âœ… ì œë„¤ë¦­: BaseRepository, ApiResponse
```

### Chapter 15: ëª¨ë“ˆ ì‹œìŠ¤í…œ
```
âœ… ES Modules: import/export
âœ… ê²½ë¡œ ë³„ì¹­: @models, @services, @decorators
âœ… ëª¨ë“ˆ êµ¬ì¡°í™”: models, repositories, services ë¶„ë¦¬
âœ… index.tsë¡œ re-export
```

### Chapter 16: ë°ì½”ë ˆì´í„°
```
âœ… ë©”ì„œë“œ ë°ì½”ë ˆì´í„°: @Log, @LogAsync, @Validate
âœ… í”„ë¡œí¼í‹° ë°ì½”ë ˆì´í„°: @Required, @Email, @MinLength
âœ… ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬: @Cache({ ttl: 5000 })
âœ… reflect-metadata í™œìš©
```

### Chapter 17: TypeScript ì„¤ì •
```
âœ… tsconfig.json ì„¤ì •
âœ… ê²½ë¡œ ë³„ì¹­ ì„¤ì •
âœ… ESLint + Prettier
âœ… strict ëª¨ë“œ
âœ… ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 1. í”„ë¡œì íŠ¸ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸
```bash
npm run dev
```

### 2. ê¸°ëŠ¥ ì¶”ê°€
```
í”„ë¡œì íŠ¸ ê´€ë¦¬
ëŒ“ê¸€ ì‹œìŠ¤í…œ
ì•Œë¦¼ ê¸°ëŠ¥
```

### 3. í…ŒìŠ¤íŠ¸ ì‘ì„±
```bash
npm install --save-dev jest @types/jest ts-jest
```

### 4. API ì„œë²„ êµ¬ì¶•
```bash
npm install express
npm install --save-dev @types/express
```

### 5. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™

SQLite, PostgreSQL, MongoDB ë“±

í”„ë¡œì íŠ¸ ì™„ì„±ì„ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰

**END OF PROJECTS**

í”„ë¡œì íŠ¸ë¥¼ ëª¨ë‘ ì™„ì„±í–ˆìŠµë‹ˆë‹¤!

**í”„ë¡œì íŠ¸ íŠ¹ì§•:**
- Part 3ì˜ ëª¨ë“  ê°œë… ì ìš©
- ì‹¤ì „ ì•„í‚¤í…ì²˜ (Repository-Service íŒ¨í„´)
- ë°ì½”ë ˆì´í„° í™œìš© (ë¡œê¹…, ìœ íš¨ì„± ê²€ì‚¬, ìºì‹±)
- ìœ í‹¸ë¦¬í‹° íƒ€ì… í™œìš©
- ëª¨ë“ˆ ì‹œìŠ¤í…œ êµ¬ì¡°í™”
- TypeScript ì„¤ì • ìµœì í™”
- í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°

ì‹¤ì œë¡œ ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆëŠ” ì™„ì „í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤! 





